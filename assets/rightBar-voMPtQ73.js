import{d as Xr,u as Yr,s as qr,r as qe,o as It,c as qt,a as pe,b as ne,e as he,i as Tg,E as Rg,f as yu,w as _e,g as Bt,h as Ft,j as Ee,k as Lg,p as Jr,l as Zr,_ as Qr,m as Hn,n as Ss,F as Cs,q as Os,t as Ig,v as Bg,x as Fg,y as ds,z as Pg,A as Dg,B as Ng,C as Mg,D as kg,G as xu,H as Ug,I as Hg,J as Wg,K as Gg,L as $g,M as Vg,N as zg,O as Kg,P as Xg,Q as Yg,R as qg,S as Jg}from"./index-NmSnJvn5.js";const Ru=s=>(Jr("data-v-7bd6dc2e"),s=s(),Zr(),s),Zg={class:"right-bar-control-item"},Qg={class:"right-bar-control-item-estimation"},jg=Ru(()=>pe("label",null,"动作捕捉",-1)),ev=Ru(()=>pe("span",null,"动画开始位置(s)",-1)),tv=Ru(()=>pe("span",null,"动画时长(s)",-1)),nv={class:"right-bar-control-button"},rv=Xr({__name:"rightBarControl",setup(s){const u=Yr(),{currentTime:r,isEstimating:f,videoName:c,abhStage:h}=qr(u),m=qe(0),S=qe(0),O=()=>{if(h.value.videoCharacterEl.pause(),S.value<0){Ee({message:"开始时间不能为负",type:"error",plain:!0});return}else if(m.value<=0){Ee({message:"动画时长必须大于零",type:"error",plain:!0});return}let U=h.value.recorder(c.value);const T=Lg.service({lock:!0,text:"正在导出动画",background:"rgba(0, 0, 0, 0.7)"});r.value=S.value,h.value.videoCharacterEl.play(),U.start(),setTimeout(()=>{U.stop(),h.value.videoCharacterEl.pause(),T.close()},m.value*1e3)},D=()=>{h.value.getCurrentFrame()};return(U,T)=>(It(),qt("div",Zg,[pe("div",Qg,[jg,ne(he(Rg),{modelValue:he(f),"onUpdate:modelValue":T[0]||(T[0]=H=>Tg(f)?f.value=H:null)},null,8,["modelValue"])]),pe("div",null,[ev,ne(he(yu),{type:"number",modelValue:S.value,"onUpdate:modelValue":T[1]||(T[1]=H=>S.value=H)},null,8,["modelValue"])]),pe("div",null,[tv,ne(he(yu),{type:"number",modelValue:m.value,"onUpdate:modelValue":T[2]||(T[2]=H=>m.value=H)},null,8,["modelValue"])]),pe("div",nv,[ne(he(Ft),{onClick:O},{default:_e(()=>[Bt("导出动画")]),_:1}),ne(he(Ft),{onClick:D},{default:_e(()=>[Bt("导出动画当前帧")]),_:1})])]))}}),iv=Qr(rv,[["__scopeId","data-v-7bd6dc2e"]]);var Vr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Vr.exports;(function(s,u){(function(){var r,f="4.17.21",c=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",S="Invalid `variable` option passed into `_.template`",O="__lodash_hash_undefined__",D=500,U="__lodash_placeholder__",T=1,H=2,$=4,X=1,P=2,q=1,ye=2,Pe=4,Q=8,ie=16,me=32,wt=64,Je=128,j=256,fe=512,Mt=30,se="...",kt=800,vn=16,Yn=1,Ns=2,Ms=3,Ut=1/0,yt=9007199254740991,ks=17976931348623157e292,qn=NaN,ut=4294967295,Us=ut-1,Hs=ut>>>1,Ws=[["ary",Je],["bind",q],["bindKey",ye],["curry",Q],["curryRight",ie],["flip",fe],["partial",me],["partialRight",wt],["rearg",j]],Zt="[object Arguments]",Jn="[object Array]",Gs="[object AsyncFunction]",mn="[object Boolean]",bn="[object Date]",$s="[object DOMException]",Zn="[object Error]",Qn="[object Function]",Pu="[object GeneratorFunction]",Ze="[object Map]",wn="[object Number]",Vs="[object Null]",ft="[object Object]",Du="[object Promise]",zs="[object Proxy]",yn="[object RegExp]",Qe="[object Set]",xn="[object String]",jn="[object Symbol]",Ks="[object Undefined]",An="[object WeakMap]",Xs="[object WeakSet]",En="[object ArrayBuffer]",Qt="[object DataView]",jr="[object Float32Array]",ei="[object Float64Array]",ti="[object Int8Array]",ni="[object Int16Array]",ri="[object Int32Array]",ii="[object Uint8Array]",ui="[object Uint8ClampedArray]",oi="[object Uint16Array]",ai="[object Uint32Array]",Ys=/\b__p \+= '';/g,qs=/\b(__p \+=) '' \+/g,Js=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nu=/&(?:amp|lt|gt|quot|#39);/g,Mu=/[&<>"']/g,Zs=RegExp(Nu.source),Qs=RegExp(Mu.source),js=/<%-([\s\S]+?)%>/g,el=/<%([\s\S]+?)%>/g,ku=/<%=([\s\S]+?)%>/g,tl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nl=/^\w*$/,rl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,si=/[\\^$.*+?()[\]{}|]/g,il=RegExp(si.source),li=/^\s+/,ul=/\s/,ol=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,al=/\{\n\/\* \[wrapped with (.+)\] \*/,sl=/,? & /,ll=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fl=/[()=,{}\[\]\/\s]/,cl=/\\(\\)?/g,dl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Uu=/\w*$/,hl=/^[-+]0x[0-9a-f]+$/i,_l=/^0b[01]+$/i,pl=/^\[object .+?Constructor\]$/,gl=/^0o[0-7]+$/i,vl=/^(?:0|[1-9]\d*)$/,ml=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,er=/($^)/,bl=/['\n\r\u2028\u2029\\]/g,tr="\\ud800-\\udfff",wl="\\u0300-\\u036f",yl="\\ufe20-\\ufe2f",xl="\\u20d0-\\u20ff",Hu=wl+yl+xl,Wu="\\u2700-\\u27bf",Gu="a-z\\xdf-\\xf6\\xf8-\\xff",Al="\\xac\\xb1\\xd7\\xf7",El="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sl="\\u2000-\\u206f",Cl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$u="A-Z\\xc0-\\xd6\\xd8-\\xde",Vu="\\ufe0e\\ufe0f",zu=Al+El+Sl+Cl,fi="['’]",Ol="["+tr+"]",Ku="["+zu+"]",nr="["+Hu+"]",Xu="\\d+",Tl="["+Wu+"]",Yu="["+Gu+"]",qu="[^"+tr+zu+Xu+Wu+Gu+$u+"]",ci="\\ud83c[\\udffb-\\udfff]",Rl="(?:"+nr+"|"+ci+")",Ju="[^"+tr+"]",di="(?:\\ud83c[\\udde6-\\uddff]){2}",hi="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+$u+"]",Zu="\\u200d",Qu="(?:"+Yu+"|"+qu+")",Ll="(?:"+jt+"|"+qu+")",ju="(?:"+fi+"(?:d|ll|m|re|s|t|ve))?",eo="(?:"+fi+"(?:D|LL|M|RE|S|T|VE))?",to=Rl+"?",no="["+Vu+"]?",Il="(?:"+Zu+"(?:"+[Ju,di,hi].join("|")+")"+no+to+")*",Bl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ro=no+to+Il,Pl="(?:"+[Tl,di,hi].join("|")+")"+ro,Dl="(?:"+[Ju+nr+"?",nr,di,hi,Ol].join("|")+")",Nl=RegExp(fi,"g"),Ml=RegExp(nr,"g"),_i=RegExp(ci+"(?="+ci+")|"+Dl+ro,"g"),kl=RegExp([jt+"?"+Yu+"+"+ju+"(?="+[Ku,jt,"$"].join("|")+")",Ll+"+"+eo+"(?="+[Ku,jt+Qu,"$"].join("|")+")",jt+"?"+Qu+"+"+ju,jt+"+"+eo,Fl,Bl,Xu,Pl].join("|"),"g"),Ul=RegExp("["+Zu+tr+Hu+Vu+"]"),Hl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gl=-1,ue={};ue[jr]=ue[ei]=ue[ti]=ue[ni]=ue[ri]=ue[ii]=ue[ui]=ue[oi]=ue[ai]=!0,ue[Zt]=ue[Jn]=ue[En]=ue[mn]=ue[Qt]=ue[bn]=ue[Zn]=ue[Qn]=ue[Ze]=ue[wn]=ue[ft]=ue[yn]=ue[Qe]=ue[xn]=ue[An]=!1;var te={};te[Zt]=te[Jn]=te[En]=te[Qt]=te[mn]=te[bn]=te[jr]=te[ei]=te[ti]=te[ni]=te[ri]=te[Ze]=te[wn]=te[ft]=te[yn]=te[Qe]=te[xn]=te[jn]=te[ii]=te[ui]=te[oi]=te[ai]=!0,te[Zn]=te[Qn]=te[An]=!1;var $l={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Vl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xl=parseFloat,Yl=parseInt,io=typeof Hn=="object"&&Hn&&Hn.Object===Object&&Hn,ql=typeof self=="object"&&self&&self.Object===Object&&self,xe=io||ql||Function("return this")(),pi=u&&!u.nodeType&&u,Ht=pi&&!0&&s&&!s.nodeType&&s,uo=Ht&&Ht.exports===pi,gi=uo&&io.process,We=function(){try{var p=Ht&&Ht.require&&Ht.require("util").types;return p||gi&&gi.binding&&gi.binding("util")}catch{}}(),oo=We&&We.isArrayBuffer,ao=We&&We.isDate,so=We&&We.isMap,lo=We&&We.isRegExp,fo=We&&We.isSet,co=We&&We.isTypedArray;function De(p,w,b){switch(b.length){case 0:return p.call(w);case 1:return p.call(w,b[0]);case 2:return p.call(w,b[0],b[1]);case 3:return p.call(w,b[0],b[1],b[2])}return p.apply(w,b)}function Jl(p,w,b,R){for(var N=-1,Y=p==null?0:p.length;++N<Y;){var ge=p[N];w(R,ge,b(ge),p)}return R}function Ge(p,w){for(var b=-1,R=p==null?0:p.length;++b<R&&w(p[b],b,p)!==!1;);return p}function Zl(p,w){for(var b=p==null?0:p.length;b--&&w(p[b],b,p)!==!1;);return p}function ho(p,w){for(var b=-1,R=p==null?0:p.length;++b<R;)if(!w(p[b],b,p))return!1;return!0}function xt(p,w){for(var b=-1,R=p==null?0:p.length,N=0,Y=[];++b<R;){var ge=p[b];w(ge,b,p)&&(Y[N++]=ge)}return Y}function rr(p,w){var b=p==null?0:p.length;return!!b&&en(p,w,0)>-1}function vi(p,w,b){for(var R=-1,N=p==null?0:p.length;++R<N;)if(b(w,p[R]))return!0;return!1}function oe(p,w){for(var b=-1,R=p==null?0:p.length,N=Array(R);++b<R;)N[b]=w(p[b],b,p);return N}function At(p,w){for(var b=-1,R=w.length,N=p.length;++b<R;)p[N+b]=w[b];return p}function mi(p,w,b,R){var N=-1,Y=p==null?0:p.length;for(R&&Y&&(b=p[++N]);++N<Y;)b=w(b,p[N],N,p);return b}function Ql(p,w,b,R){var N=p==null?0:p.length;for(R&&N&&(b=p[--N]);N--;)b=w(b,p[N],N,p);return b}function bi(p,w){for(var b=-1,R=p==null?0:p.length;++b<R;)if(w(p[b],b,p))return!0;return!1}var jl=wi("length");function ef(p){return p.split("")}function tf(p){return p.match(ll)||[]}function _o(p,w,b){var R;return b(p,function(N,Y,ge){if(w(N,Y,ge))return R=Y,!1}),R}function ir(p,w,b,R){for(var N=p.length,Y=b+(R?1:-1);R?Y--:++Y<N;)if(w(p[Y],Y,p))return Y;return-1}function en(p,w,b){return w===w?_f(p,w,b):ir(p,po,b)}function nf(p,w,b,R){for(var N=b-1,Y=p.length;++N<Y;)if(R(p[N],w))return N;return-1}function po(p){return p!==p}function go(p,w){var b=p==null?0:p.length;return b?xi(p,w)/b:qn}function wi(p){return function(w){return w==null?r:w[p]}}function yi(p){return function(w){return p==null?r:p[w]}}function vo(p,w,b,R,N){return N(p,function(Y,ge,ee){b=R?(R=!1,Y):w(b,Y,ge,ee)}),b}function rf(p,w){var b=p.length;for(p.sort(w);b--;)p[b]=p[b].value;return p}function xi(p,w){for(var b,R=-1,N=p.length;++R<N;){var Y=w(p[R]);Y!==r&&(b=b===r?Y:b+Y)}return b}function Ai(p,w){for(var b=-1,R=Array(p);++b<p;)R[b]=w(b);return R}function uf(p,w){return oe(w,function(b){return[b,p[b]]})}function mo(p){return p&&p.slice(0,xo(p)+1).replace(li,"")}function Ne(p){return function(w){return p(w)}}function Ei(p,w){return oe(w,function(b){return p[b]})}function Sn(p,w){return p.has(w)}function bo(p,w){for(var b=-1,R=p.length;++b<R&&en(w,p[b],0)>-1;);return b}function wo(p,w){for(var b=p.length;b--&&en(w,p[b],0)>-1;);return b}function of(p,w){for(var b=p.length,R=0;b--;)p[b]===w&&++R;return R}var af=yi($l),sf=yi(Vl);function lf(p){return"\\"+Kl[p]}function ff(p,w){return p==null?r:p[w]}function tn(p){return Ul.test(p)}function cf(p){return Hl.test(p)}function df(p){for(var w,b=[];!(w=p.next()).done;)b.push(w.value);return b}function Si(p){var w=-1,b=Array(p.size);return p.forEach(function(R,N){b[++w]=[N,R]}),b}function yo(p,w){return function(b){return p(w(b))}}function Et(p,w){for(var b=-1,R=p.length,N=0,Y=[];++b<R;){var ge=p[b];(ge===w||ge===U)&&(p[b]=U,Y[N++]=b)}return Y}function ur(p){var w=-1,b=Array(p.size);return p.forEach(function(R){b[++w]=R}),b}function hf(p){var w=-1,b=Array(p.size);return p.forEach(function(R){b[++w]=[R,R]}),b}function _f(p,w,b){for(var R=b-1,N=p.length;++R<N;)if(p[R]===w)return R;return-1}function pf(p,w,b){for(var R=b+1;R--;)if(p[R]===w)return R;return R}function nn(p){return tn(p)?vf(p):jl(p)}function je(p){return tn(p)?mf(p):ef(p)}function xo(p){for(var w=p.length;w--&&ul.test(p.charAt(w)););return w}var gf=yi(zl);function vf(p){for(var w=_i.lastIndex=0;_i.test(p);)++w;return w}function mf(p){return p.match(_i)||[]}function bf(p){return p.match(kl)||[]}var wf=function p(w){w=w==null?xe:rn.defaults(xe.Object(),w,rn.pick(xe,Wl));var b=w.Array,R=w.Date,N=w.Error,Y=w.Function,ge=w.Math,ee=w.Object,Ci=w.RegExp,yf=w.String,$e=w.TypeError,or=b.prototype,xf=Y.prototype,un=ee.prototype,ar=w["__core-js_shared__"],sr=xf.toString,Z=un.hasOwnProperty,Af=0,Ao=function(){var e=/[^.]+$/.exec(ar&&ar.keys&&ar.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),lr=un.toString,Ef=sr.call(ee),Sf=xe._,Cf=Ci("^"+sr.call(Z).replace(si,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fr=uo?w.Buffer:r,St=w.Symbol,cr=w.Uint8Array,Eo=fr?fr.allocUnsafe:r,dr=yo(ee.getPrototypeOf,ee),So=ee.create,Co=un.propertyIsEnumerable,hr=or.splice,Oo=St?St.isConcatSpreadable:r,Cn=St?St.iterator:r,Wt=St?St.toStringTag:r,_r=function(){try{var e=Kt(ee,"defineProperty");return e({},"",{}),e}catch{}}(),Of=w.clearTimeout!==xe.clearTimeout&&w.clearTimeout,Tf=R&&R.now!==xe.Date.now&&R.now,Rf=w.setTimeout!==xe.setTimeout&&w.setTimeout,pr=ge.ceil,gr=ge.floor,Oi=ee.getOwnPropertySymbols,Lf=fr?fr.isBuffer:r,To=w.isFinite,If=or.join,Bf=yo(ee.keys,ee),ve=ge.max,Se=ge.min,Ff=R.now,Pf=w.parseInt,Ro=ge.random,Df=or.reverse,Ti=Kt(w,"DataView"),On=Kt(w,"Map"),Ri=Kt(w,"Promise"),on=Kt(w,"Set"),Tn=Kt(w,"WeakMap"),Rn=Kt(ee,"create"),vr=Tn&&new Tn,an={},Nf=Xt(Ti),Mf=Xt(On),kf=Xt(Ri),Uf=Xt(on),Hf=Xt(Tn),mr=St?St.prototype:r,Ln=mr?mr.valueOf:r,Lo=mr?mr.toString:r;function a(e){if(le(e)&&!M(e)&&!(e instanceof z)){if(e instanceof Ve)return e;if(Z.call(e,"__wrapped__"))return Ia(e)}return new Ve(e)}var sn=function(){function e(){}return function(t){if(!ae(t))return{};if(So)return So(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function br(){}function Ve(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}a.templateSettings={escape:js,evaluate:el,interpolate:ku,variable:"",imports:{_:a}},a.prototype=br.prototype,a.prototype.constructor=a,Ve.prototype=sn(br.prototype),Ve.prototype.constructor=Ve;function z(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ut,this.__views__=[]}function Wf(){var e=new z(this.__wrapped__);return e.__actions__=Le(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Le(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Le(this.__views__),e}function Gf(){if(this.__filtered__){var e=new z(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function $f(){var e=this.__wrapped__.value(),t=this.__dir__,n=M(e),i=t<0,o=n?e.length:0,l=td(0,o,this.__views__),d=l.start,_=l.end,g=_-d,y=i?_:d-1,x=this.__iteratees__,E=x.length,C=0,L=Se(g,this.__takeCount__);if(!n||!i&&o==g&&L==g)return ea(e,this.__actions__);var B=[];e:for(;g--&&C<L;){y+=t;for(var W=-1,F=e[y];++W<E;){var V=x[W],K=V.iteratee,Ue=V.type,Re=K(F);if(Ue==Ns)F=Re;else if(!Re){if(Ue==Yn)continue e;break e}}B[C++]=F}return B}z.prototype=sn(br.prototype),z.prototype.constructor=z;function Gt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Vf(){this.__data__=Rn?Rn(null):{},this.size=0}function zf(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Kf(e){var t=this.__data__;if(Rn){var n=t[e];return n===O?r:n}return Z.call(t,e)?t[e]:r}function Xf(e){var t=this.__data__;return Rn?t[e]!==r:Z.call(t,e)}function Yf(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Rn&&t===r?O:t,this}Gt.prototype.clear=Vf,Gt.prototype.delete=zf,Gt.prototype.get=Kf,Gt.prototype.has=Xf,Gt.prototype.set=Yf;function ct(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function qf(){this.__data__=[],this.size=0}function Jf(e){var t=this.__data__,n=wr(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():hr.call(t,n,1),--this.size,!0}function Zf(e){var t=this.__data__,n=wr(t,e);return n<0?r:t[n][1]}function Qf(e){return wr(this.__data__,e)>-1}function jf(e,t){var n=this.__data__,i=wr(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}ct.prototype.clear=qf,ct.prototype.delete=Jf,ct.prototype.get=Zf,ct.prototype.has=Qf,ct.prototype.set=jf;function dt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ec(){this.size=0,this.__data__={hash:new Gt,map:new(On||ct),string:new Gt}}function tc(e){var t=Br(this,e).delete(e);return this.size-=t?1:0,t}function nc(e){return Br(this,e).get(e)}function rc(e){return Br(this,e).has(e)}function ic(e,t){var n=Br(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}dt.prototype.clear=ec,dt.prototype.delete=tc,dt.prototype.get=nc,dt.prototype.has=rc,dt.prototype.set=ic;function $t(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new dt;++t<n;)this.add(e[t])}function uc(e){return this.__data__.set(e,O),this}function oc(e){return this.__data__.has(e)}$t.prototype.add=$t.prototype.push=uc,$t.prototype.has=oc;function et(e){var t=this.__data__=new ct(e);this.size=t.size}function ac(){this.__data__=new ct,this.size=0}function sc(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function lc(e){return this.__data__.get(e)}function fc(e){return this.__data__.has(e)}function cc(e,t){var n=this.__data__;if(n instanceof ct){var i=n.__data__;if(!On||i.length<c-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new dt(i)}return n.set(e,t),this.size=n.size,this}et.prototype.clear=ac,et.prototype.delete=sc,et.prototype.get=lc,et.prototype.has=fc,et.prototype.set=cc;function Io(e,t){var n=M(e),i=!n&&Yt(e),o=!n&&!i&&Lt(e),l=!n&&!i&&!o&&dn(e),d=n||i||o||l,_=d?Ai(e.length,yf):[],g=_.length;for(var y in e)(t||Z.call(e,y))&&!(d&&(y=="length"||o&&(y=="offset"||y=="parent")||l&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||gt(y,g)))&&_.push(y);return _}function Bo(e){var t=e.length;return t?e[Hi(0,t-1)]:r}function dc(e,t){return Fr(Le(e),Vt(t,0,e.length))}function hc(e){return Fr(Le(e))}function Li(e,t,n){(n!==r&&!tt(e[t],n)||n===r&&!(t in e))&&ht(e,t,n)}function In(e,t,n){var i=e[t];(!(Z.call(e,t)&&tt(i,n))||n===r&&!(t in e))&&ht(e,t,n)}function wr(e,t){for(var n=e.length;n--;)if(tt(e[n][0],t))return n;return-1}function _c(e,t,n,i){return Ct(e,function(o,l,d){t(i,o,n(o),d)}),i}function Fo(e,t){return e&&at(t,be(t),e)}function pc(e,t){return e&&at(t,Be(t),e)}function ht(e,t,n){t=="__proto__"&&_r?_r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ii(e,t){for(var n=-1,i=t.length,o=b(i),l=e==null;++n<i;)o[n]=l?r:cu(e,t[n]);return o}function Vt(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function ze(e,t,n,i,o,l){var d,_=t&T,g=t&H,y=t&$;if(n&&(d=o?n(e,i,o,l):n(e)),d!==r)return d;if(!ae(e))return e;var x=M(e);if(x){if(d=rd(e),!_)return Le(e,d)}else{var E=Ce(e),C=E==Qn||E==Pu;if(Lt(e))return ra(e,_);if(E==ft||E==Zt||C&&!o){if(d=g||C?{}:xa(e),!_)return g?Kc(e,pc(d,e)):zc(e,Fo(d,e))}else{if(!te[E])return o?e:{};d=id(e,E,_)}}l||(l=new et);var L=l.get(e);if(L)return L;l.set(e,d),Za(e)?e.forEach(function(F){d.add(ze(F,t,n,F,e,l))}):qa(e)&&e.forEach(function(F,V){d.set(V,ze(F,t,n,V,e,l))});var B=y?g?Zi:Ji:g?Be:be,W=x?r:B(e);return Ge(W||e,function(F,V){W&&(V=F,F=e[V]),In(d,V,ze(F,t,n,V,e,l))}),d}function gc(e){var t=be(e);return function(n){return Po(n,e,t)}}function Po(e,t,n){var i=n.length;if(e==null)return!i;for(e=ee(e);i--;){var o=n[i],l=t[o],d=e[o];if(d===r&&!(o in e)||!l(d))return!1}return!0}function Do(e,t,n){if(typeof e!="function")throw new $e(m);return kn(function(){e.apply(r,n)},t)}function Bn(e,t,n,i){var o=-1,l=rr,d=!0,_=e.length,g=[],y=t.length;if(!_)return g;n&&(t=oe(t,Ne(n))),i?(l=vi,d=!1):t.length>=c&&(l=Sn,d=!1,t=new $t(t));e:for(;++o<_;){var x=e[o],E=n==null?x:n(x);if(x=i||x!==0?x:0,d&&E===E){for(var C=y;C--;)if(t[C]===E)continue e;g.push(x)}else l(t,E,i)||g.push(x)}return g}var Ct=sa(ot),No=sa(Fi,!0);function vc(e,t){var n=!0;return Ct(e,function(i,o,l){return n=!!t(i,o,l),n}),n}function yr(e,t,n){for(var i=-1,o=e.length;++i<o;){var l=e[i],d=t(l);if(d!=null&&(_===r?d===d&&!ke(d):n(d,_)))var _=d,g=l}return g}function mc(e,t,n,i){var o=e.length;for(n=k(n),n<0&&(n=-n>o?0:o+n),i=i===r||i>o?o:k(i),i<0&&(i+=o),i=n>i?0:ja(i);n<i;)e[n++]=t;return e}function Mo(e,t){var n=[];return Ct(e,function(i,o,l){t(i,o,l)&&n.push(i)}),n}function Ae(e,t,n,i,o){var l=-1,d=e.length;for(n||(n=od),o||(o=[]);++l<d;){var _=e[l];t>0&&n(_)?t>1?Ae(_,t-1,n,i,o):At(o,_):i||(o[o.length]=_)}return o}var Bi=la(),ko=la(!0);function ot(e,t){return e&&Bi(e,t,be)}function Fi(e,t){return e&&ko(e,t,be)}function xr(e,t){return xt(t,function(n){return vt(e[n])})}function zt(e,t){t=Tt(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[st(t[n++])];return n&&n==i?e:r}function Uo(e,t,n){var i=t(e);return M(e)?i:At(i,n(e))}function Oe(e){return e==null?e===r?Ks:Vs:Wt&&Wt in ee(e)?ed(e):hd(e)}function Pi(e,t){return e>t}function bc(e,t){return e!=null&&Z.call(e,t)}function wc(e,t){return e!=null&&t in ee(e)}function yc(e,t,n){return e>=Se(t,n)&&e<ve(t,n)}function Di(e,t,n){for(var i=n?vi:rr,o=e[0].length,l=e.length,d=l,_=b(l),g=1/0,y=[];d--;){var x=e[d];d&&t&&(x=oe(x,Ne(t))),g=Se(x.length,g),_[d]=!n&&(t||o>=120&&x.length>=120)?new $t(d&&x):r}x=e[0];var E=-1,C=_[0];e:for(;++E<o&&y.length<g;){var L=x[E],B=t?t(L):L;if(L=n||L!==0?L:0,!(C?Sn(C,B):i(y,B,n))){for(d=l;--d;){var W=_[d];if(!(W?Sn(W,B):i(e[d],B,n)))continue e}C&&C.push(B),y.push(L)}}return y}function xc(e,t,n,i){return ot(e,function(o,l,d){t(i,n(o),l,d)}),i}function Fn(e,t,n){t=Tt(t,e),e=Ca(e,t);var i=e==null?e:e[st(Xe(t))];return i==null?r:De(i,e,n)}function Ho(e){return le(e)&&Oe(e)==Zt}function Ac(e){return le(e)&&Oe(e)==En}function Ec(e){return le(e)&&Oe(e)==bn}function Pn(e,t,n,i,o){return e===t?!0:e==null||t==null||!le(e)&&!le(t)?e!==e&&t!==t:Sc(e,t,n,i,Pn,o)}function Sc(e,t,n,i,o,l){var d=M(e),_=M(t),g=d?Jn:Ce(e),y=_?Jn:Ce(t);g=g==Zt?ft:g,y=y==Zt?ft:y;var x=g==ft,E=y==ft,C=g==y;if(C&&Lt(e)){if(!Lt(t))return!1;d=!0,x=!1}if(C&&!x)return l||(l=new et),d||dn(e)?ba(e,t,n,i,o,l):Qc(e,t,g,n,i,o,l);if(!(n&X)){var L=x&&Z.call(e,"__wrapped__"),B=E&&Z.call(t,"__wrapped__");if(L||B){var W=L?e.value():e,F=B?t.value():t;return l||(l=new et),o(W,F,n,i,l)}}return C?(l||(l=new et),jc(e,t,n,i,o,l)):!1}function Cc(e){return le(e)&&Ce(e)==Ze}function Ni(e,t,n,i){var o=n.length,l=o,d=!i;if(e==null)return!l;for(e=ee(e);o--;){var _=n[o];if(d&&_[2]?_[1]!==e[_[0]]:!(_[0]in e))return!1}for(;++o<l;){_=n[o];var g=_[0],y=e[g],x=_[1];if(d&&_[2]){if(y===r&&!(g in e))return!1}else{var E=new et;if(i)var C=i(y,x,g,e,t,E);if(!(C===r?Pn(x,y,X|P,i,E):C))return!1}}return!0}function Wo(e){if(!ae(e)||sd(e))return!1;var t=vt(e)?Cf:pl;return t.test(Xt(e))}function Oc(e){return le(e)&&Oe(e)==yn}function Tc(e){return le(e)&&Ce(e)==Qe}function Rc(e){return le(e)&&Ur(e.length)&&!!ue[Oe(e)]}function Go(e){return typeof e=="function"?e:e==null?Fe:typeof e=="object"?M(e)?zo(e[0],e[1]):Vo(e):fs(e)}function Mi(e){if(!Mn(e))return Bf(e);var t=[];for(var n in ee(e))Z.call(e,n)&&n!="constructor"&&t.push(n);return t}function Lc(e){if(!ae(e))return dd(e);var t=Mn(e),n=[];for(var i in e)i=="constructor"&&(t||!Z.call(e,i))||n.push(i);return n}function ki(e,t){return e<t}function $o(e,t){var n=-1,i=Ie(e)?b(e.length):[];return Ct(e,function(o,l,d){i[++n]=t(o,l,d)}),i}function Vo(e){var t=ji(e);return t.length==1&&t[0][2]?Ea(t[0][0],t[0][1]):function(n){return n===e||Ni(n,e,t)}}function zo(e,t){return tu(e)&&Aa(t)?Ea(st(e),t):function(n){var i=cu(n,e);return i===r&&i===t?du(n,e):Pn(t,i,X|P)}}function Ar(e,t,n,i,o){e!==t&&Bi(t,function(l,d){if(o||(o=new et),ae(l))Ic(e,t,d,n,Ar,i,o);else{var _=i?i(ru(e,d),l,d+"",e,t,o):r;_===r&&(_=l),Li(e,d,_)}},Be)}function Ic(e,t,n,i,o,l,d){var _=ru(e,n),g=ru(t,n),y=d.get(g);if(y){Li(e,n,y);return}var x=l?l(_,g,n+"",e,t,d):r,E=x===r;if(E){var C=M(g),L=!C&&Lt(g),B=!C&&!L&&dn(g);x=g,C||L||B?M(_)?x=_:ce(_)?x=Le(_):L?(E=!1,x=ra(g,!0)):B?(E=!1,x=ia(g,!0)):x=[]:Un(g)||Yt(g)?(x=_,Yt(_)?x=es(_):(!ae(_)||vt(_))&&(x=xa(g))):E=!1}E&&(d.set(g,x),o(x,g,i,l,d),d.delete(g)),Li(e,n,x)}function Ko(e,t){var n=e.length;if(n)return t+=t<0?n:0,gt(t,n)?e[t]:r}function Xo(e,t,n){t.length?t=oe(t,function(l){return M(l)?function(d){return zt(d,l.length===1?l[0]:l)}:l}):t=[Fe];var i=-1;t=oe(t,Ne(I()));var o=$o(e,function(l,d,_){var g=oe(t,function(y){return y(l)});return{criteria:g,index:++i,value:l}});return rf(o,function(l,d){return Vc(l,d,n)})}function Bc(e,t){return Yo(e,t,function(n,i){return du(e,i)})}function Yo(e,t,n){for(var i=-1,o=t.length,l={};++i<o;){var d=t[i],_=zt(e,d);n(_,d)&&Dn(l,Tt(d,e),_)}return l}function Fc(e){return function(t){return zt(t,e)}}function Ui(e,t,n,i){var o=i?nf:en,l=-1,d=t.length,_=e;for(e===t&&(t=Le(t)),n&&(_=oe(e,Ne(n)));++l<d;)for(var g=0,y=t[l],x=n?n(y):y;(g=o(_,x,g,i))>-1;)_!==e&&hr.call(_,g,1),hr.call(e,g,1);return e}function qo(e,t){for(var n=e?t.length:0,i=n-1;n--;){var o=t[n];if(n==i||o!==l){var l=o;gt(o)?hr.call(e,o,1):$i(e,o)}}return e}function Hi(e,t){return e+gr(Ro()*(t-e+1))}function Pc(e,t,n,i){for(var o=-1,l=ve(pr((t-e)/(n||1)),0),d=b(l);l--;)d[i?l:++o]=e,e+=n;return d}function Wi(e,t){var n="";if(!e||t<1||t>yt)return n;do t%2&&(n+=e),t=gr(t/2),t&&(e+=e);while(t);return n}function G(e,t){return iu(Sa(e,t,Fe),e+"")}function Dc(e){return Bo(hn(e))}function Nc(e,t){var n=hn(e);return Fr(n,Vt(t,0,n.length))}function Dn(e,t,n,i){if(!ae(e))return e;t=Tt(t,e);for(var o=-1,l=t.length,d=l-1,_=e;_!=null&&++o<l;){var g=st(t[o]),y=n;if(g==="__proto__"||g==="constructor"||g==="prototype")return e;if(o!=d){var x=_[g];y=i?i(x,g,_):r,y===r&&(y=ae(x)?x:gt(t[o+1])?[]:{})}In(_,g,y),_=_[g]}return e}var Jo=vr?function(e,t){return vr.set(e,t),e}:Fe,Mc=_r?function(e,t){return _r(e,"toString",{configurable:!0,enumerable:!1,value:_u(t),writable:!0})}:Fe;function kc(e){return Fr(hn(e))}function Ke(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),n=n>o?o:n,n<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var l=b(o);++i<o;)l[i]=e[i+t];return l}function Uc(e,t){var n;return Ct(e,function(i,o,l){return n=t(i,o,l),!n}),!!n}function Er(e,t,n){var i=0,o=e==null?i:e.length;if(typeof t=="number"&&t===t&&o<=Hs){for(;i<o;){var l=i+o>>>1,d=e[l];d!==null&&!ke(d)&&(n?d<=t:d<t)?i=l+1:o=l}return o}return Gi(e,t,Fe,n)}function Gi(e,t,n,i){var o=0,l=e==null?0:e.length;if(l===0)return 0;t=n(t);for(var d=t!==t,_=t===null,g=ke(t),y=t===r;o<l;){var x=gr((o+l)/2),E=n(e[x]),C=E!==r,L=E===null,B=E===E,W=ke(E);if(d)var F=i||B;else y?F=B&&(i||C):_?F=B&&C&&(i||!L):g?F=B&&C&&!L&&(i||!W):L||W?F=!1:F=i?E<=t:E<t;F?o=x+1:l=x}return Se(l,Us)}function Zo(e,t){for(var n=-1,i=e.length,o=0,l=[];++n<i;){var d=e[n],_=t?t(d):d;if(!n||!tt(_,g)){var g=_;l[o++]=d===0?0:d}}return l}function Qo(e){return typeof e=="number"?e:ke(e)?qn:+e}function Me(e){if(typeof e=="string")return e;if(M(e))return oe(e,Me)+"";if(ke(e))return Lo?Lo.call(e):"";var t=e+"";return t=="0"&&1/e==-Ut?"-0":t}function Ot(e,t,n){var i=-1,o=rr,l=e.length,d=!0,_=[],g=_;if(n)d=!1,o=vi;else if(l>=c){var y=t?null:Jc(e);if(y)return ur(y);d=!1,o=Sn,g=new $t}else g=t?[]:_;e:for(;++i<l;){var x=e[i],E=t?t(x):x;if(x=n||x!==0?x:0,d&&E===E){for(var C=g.length;C--;)if(g[C]===E)continue e;t&&g.push(E),_.push(x)}else o(g,E,n)||(g!==_&&g.push(E),_.push(x))}return _}function $i(e,t){return t=Tt(t,e),e=Ca(e,t),e==null||delete e[st(Xe(t))]}function jo(e,t,n,i){return Dn(e,t,n(zt(e,t)),i)}function Sr(e,t,n,i){for(var o=e.length,l=i?o:-1;(i?l--:++l<o)&&t(e[l],l,e););return n?Ke(e,i?0:l,i?l+1:o):Ke(e,i?l+1:0,i?o:l)}function ea(e,t){var n=e;return n instanceof z&&(n=n.value()),mi(t,function(i,o){return o.func.apply(o.thisArg,At([i],o.args))},n)}function Vi(e,t,n){var i=e.length;if(i<2)return i?Ot(e[0]):[];for(var o=-1,l=b(i);++o<i;)for(var d=e[o],_=-1;++_<i;)_!=o&&(l[o]=Bn(l[o]||d,e[_],t,n));return Ot(Ae(l,1),t,n)}function ta(e,t,n){for(var i=-1,o=e.length,l=t.length,d={};++i<o;){var _=i<l?t[i]:r;n(d,e[i],_)}return d}function zi(e){return ce(e)?e:[]}function Ki(e){return typeof e=="function"?e:Fe}function Tt(e,t){return M(e)?e:tu(e,t)?[e]:La(J(e))}var Hc=G;function Rt(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:Ke(e,t,n)}var na=Of||function(e){return xe.clearTimeout(e)};function ra(e,t){if(t)return e.slice();var n=e.length,i=Eo?Eo(n):new e.constructor(n);return e.copy(i),i}function Xi(e){var t=new e.constructor(e.byteLength);return new cr(t).set(new cr(e)),t}function Wc(e,t){var n=t?Xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Gc(e){var t=new e.constructor(e.source,Uu.exec(e));return t.lastIndex=e.lastIndex,t}function $c(e){return Ln?ee(Ln.call(e)):{}}function ia(e,t){var n=t?Xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ua(e,t){if(e!==t){var n=e!==r,i=e===null,o=e===e,l=ke(e),d=t!==r,_=t===null,g=t===t,y=ke(t);if(!_&&!y&&!l&&e>t||l&&d&&g&&!_&&!y||i&&d&&g||!n&&g||!o)return 1;if(!i&&!l&&!y&&e<t||y&&n&&o&&!i&&!l||_&&n&&o||!d&&o||!g)return-1}return 0}function Vc(e,t,n){for(var i=-1,o=e.criteria,l=t.criteria,d=o.length,_=n.length;++i<d;){var g=ua(o[i],l[i]);if(g){if(i>=_)return g;var y=n[i];return g*(y=="desc"?-1:1)}}return e.index-t.index}function oa(e,t,n,i){for(var o=-1,l=e.length,d=n.length,_=-1,g=t.length,y=ve(l-d,0),x=b(g+y),E=!i;++_<g;)x[_]=t[_];for(;++o<d;)(E||o<l)&&(x[n[o]]=e[o]);for(;y--;)x[_++]=e[o++];return x}function aa(e,t,n,i){for(var o=-1,l=e.length,d=-1,_=n.length,g=-1,y=t.length,x=ve(l-_,0),E=b(x+y),C=!i;++o<x;)E[o]=e[o];for(var L=o;++g<y;)E[L+g]=t[g];for(;++d<_;)(C||o<l)&&(E[L+n[d]]=e[o++]);return E}function Le(e,t){var n=-1,i=e.length;for(t||(t=b(i));++n<i;)t[n]=e[n];return t}function at(e,t,n,i){var o=!n;n||(n={});for(var l=-1,d=t.length;++l<d;){var _=t[l],g=i?i(n[_],e[_],_,n,e):r;g===r&&(g=e[_]),o?ht(n,_,g):In(n,_,g)}return n}function zc(e,t){return at(e,eu(e),t)}function Kc(e,t){return at(e,wa(e),t)}function Cr(e,t){return function(n,i){var o=M(n)?Jl:_c,l=t?t():{};return o(n,e,I(i,2),l)}}function ln(e){return G(function(t,n){var i=-1,o=n.length,l=o>1?n[o-1]:r,d=o>2?n[2]:r;for(l=e.length>3&&typeof l=="function"?(o--,l):r,d&&Te(n[0],n[1],d)&&(l=o<3?r:l,o=1),t=ee(t);++i<o;){var _=n[i];_&&e(t,_,i,l)}return t})}function sa(e,t){return function(n,i){if(n==null)return n;if(!Ie(n))return e(n,i);for(var o=n.length,l=t?o:-1,d=ee(n);(t?l--:++l<o)&&i(d[l],l,d)!==!1;);return n}}function la(e){return function(t,n,i){for(var o=-1,l=ee(t),d=i(t),_=d.length;_--;){var g=d[e?_:++o];if(n(l[g],g,l)===!1)break}return t}}function Xc(e,t,n){var i=t&q,o=Nn(e);function l(){var d=this&&this!==xe&&this instanceof l?o:e;return d.apply(i?n:this,arguments)}return l}function fa(e){return function(t){t=J(t);var n=tn(t)?je(t):r,i=n?n[0]:t.charAt(0),o=n?Rt(n,1).join(""):t.slice(1);return i[e]()+o}}function fn(e){return function(t){return mi(ss(as(t).replace(Nl,"")),e,"")}}function Nn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=sn(e.prototype),i=e.apply(n,t);return ae(i)?i:n}}function Yc(e,t,n){var i=Nn(e);function o(){for(var l=arguments.length,d=b(l),_=l,g=cn(o);_--;)d[_]=arguments[_];var y=l<3&&d[0]!==g&&d[l-1]!==g?[]:Et(d,g);if(l-=y.length,l<n)return pa(e,t,Or,o.placeholder,r,d,y,r,r,n-l);var x=this&&this!==xe&&this instanceof o?i:e;return De(x,this,d)}return o}function ca(e){return function(t,n,i){var o=ee(t);if(!Ie(t)){var l=I(n,3);t=be(t),n=function(_){return l(o[_],_,o)}}var d=e(t,n,i);return d>-1?o[l?t[d]:d]:r}}function da(e){return pt(function(t){var n=t.length,i=n,o=Ve.prototype.thru;for(e&&t.reverse();i--;){var l=t[i];if(typeof l!="function")throw new $e(m);if(o&&!d&&Ir(l)=="wrapper")var d=new Ve([],!0)}for(i=d?i:n;++i<n;){l=t[i];var _=Ir(l),g=_=="wrapper"?Qi(l):r;g&&nu(g[0])&&g[1]==(Je|Q|me|j)&&!g[4].length&&g[9]==1?d=d[Ir(g[0])].apply(d,g[3]):d=l.length==1&&nu(l)?d[_]():d.thru(l)}return function(){var y=arguments,x=y[0];if(d&&y.length==1&&M(x))return d.plant(x).value();for(var E=0,C=n?t[E].apply(this,y):x;++E<n;)C=t[E].call(this,C);return C}})}function Or(e,t,n,i,o,l,d,_,g,y){var x=t&Je,E=t&q,C=t&ye,L=t&(Q|ie),B=t&fe,W=C?r:Nn(e);function F(){for(var V=arguments.length,K=b(V),Ue=V;Ue--;)K[Ue]=arguments[Ue];if(L)var Re=cn(F),He=of(K,Re);if(i&&(K=oa(K,i,o,L)),l&&(K=aa(K,l,d,L)),V-=He,L&&V<y){var de=Et(K,Re);return pa(e,t,Or,F.placeholder,n,K,de,_,g,y-V)}var nt=E?n:this,bt=C?nt[e]:e;return V=K.length,_?K=_d(K,_):B&&V>1&&K.reverse(),x&&g<V&&(K.length=g),this&&this!==xe&&this instanceof F&&(bt=W||Nn(bt)),bt.apply(nt,K)}return F}function ha(e,t){return function(n,i){return xc(n,e,t(i),{})}}function Tr(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;typeof n=="string"||typeof i=="string"?(n=Me(n),i=Me(i)):(n=Qo(n),i=Qo(i)),o=e(n,i)}return o}}function Yi(e){return pt(function(t){return t=oe(t,Ne(I())),G(function(n){var i=this;return e(t,function(o){return De(o,i,n)})})})}function Rr(e,t){t=t===r?" ":Me(t);var n=t.length;if(n<2)return n?Wi(t,e):t;var i=Wi(t,pr(e/nn(t)));return tn(t)?Rt(je(i),0,e).join(""):i.slice(0,e)}function qc(e,t,n,i){var o=t&q,l=Nn(e);function d(){for(var _=-1,g=arguments.length,y=-1,x=i.length,E=b(x+g),C=this&&this!==xe&&this instanceof d?l:e;++y<x;)E[y]=i[y];for(;g--;)E[y++]=arguments[++_];return De(C,o?n:this,E)}return d}function _a(e){return function(t,n,i){return i&&typeof i!="number"&&Te(t,n,i)&&(n=i=r),t=mt(t),n===r?(n=t,t=0):n=mt(n),i=i===r?t<n?1:-1:mt(i),Pc(t,n,i,e)}}function Lr(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Ye(t),n=Ye(n)),e(t,n)}}function pa(e,t,n,i,o,l,d,_,g,y){var x=t&Q,E=x?d:r,C=x?r:d,L=x?l:r,B=x?r:l;t|=x?me:wt,t&=~(x?wt:me),t&Pe||(t&=~(q|ye));var W=[e,t,o,L,E,B,C,_,g,y],F=n.apply(r,W);return nu(e)&&Oa(F,W),F.placeholder=i,Ta(F,e,t)}function qi(e){var t=ge[e];return function(n,i){if(n=Ye(n),i=i==null?0:Se(k(i),292),i&&To(n)){var o=(J(n)+"e").split("e"),l=t(o[0]+"e"+(+o[1]+i));return o=(J(l)+"e").split("e"),+(o[0]+"e"+(+o[1]-i))}return t(n)}}var Jc=on&&1/ur(new on([,-0]))[1]==Ut?function(e){return new on(e)}:vu;function ga(e){return function(t){var n=Ce(t);return n==Ze?Si(t):n==Qe?hf(t):uf(t,e(t))}}function _t(e,t,n,i,o,l,d,_){var g=t&ye;if(!g&&typeof e!="function")throw new $e(m);var y=i?i.length:0;if(y||(t&=~(me|wt),i=o=r),d=d===r?d:ve(k(d),0),_=_===r?_:k(_),y-=o?o.length:0,t&wt){var x=i,E=o;i=o=r}var C=g?r:Qi(e),L=[e,t,n,i,o,x,E,l,d,_];if(C&&cd(L,C),e=L[0],t=L[1],n=L[2],i=L[3],o=L[4],_=L[9]=L[9]===r?g?0:e.length:ve(L[9]-y,0),!_&&t&(Q|ie)&&(t&=~(Q|ie)),!t||t==q)var B=Xc(e,t,n);else t==Q||t==ie?B=Yc(e,t,_):(t==me||t==(q|me))&&!o.length?B=qc(e,t,n,i):B=Or.apply(r,L);var W=C?Jo:Oa;return Ta(W(B,L),e,t)}function va(e,t,n,i){return e===r||tt(e,un[n])&&!Z.call(i,n)?t:e}function ma(e,t,n,i,o,l){return ae(e)&&ae(t)&&(l.set(t,e),Ar(e,t,r,ma,l),l.delete(t)),e}function Zc(e){return Un(e)?r:e}function ba(e,t,n,i,o,l){var d=n&X,_=e.length,g=t.length;if(_!=g&&!(d&&g>_))return!1;var y=l.get(e),x=l.get(t);if(y&&x)return y==t&&x==e;var E=-1,C=!0,L=n&P?new $t:r;for(l.set(e,t),l.set(t,e);++E<_;){var B=e[E],W=t[E];if(i)var F=d?i(W,B,E,t,e,l):i(B,W,E,e,t,l);if(F!==r){if(F)continue;C=!1;break}if(L){if(!bi(t,function(V,K){if(!Sn(L,K)&&(B===V||o(B,V,n,i,l)))return L.push(K)})){C=!1;break}}else if(!(B===W||o(B,W,n,i,l))){C=!1;break}}return l.delete(e),l.delete(t),C}function Qc(e,t,n,i,o,l,d){switch(n){case Qt:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case En:return!(e.byteLength!=t.byteLength||!l(new cr(e),new cr(t)));case mn:case bn:case wn:return tt(+e,+t);case Zn:return e.name==t.name&&e.message==t.message;case yn:case xn:return e==t+"";case Ze:var _=Si;case Qe:var g=i&X;if(_||(_=ur),e.size!=t.size&&!g)return!1;var y=d.get(e);if(y)return y==t;i|=P,d.set(e,t);var x=ba(_(e),_(t),i,o,l,d);return d.delete(e),x;case jn:if(Ln)return Ln.call(e)==Ln.call(t)}return!1}function jc(e,t,n,i,o,l){var d=n&X,_=Ji(e),g=_.length,y=Ji(t),x=y.length;if(g!=x&&!d)return!1;for(var E=g;E--;){var C=_[E];if(!(d?C in t:Z.call(t,C)))return!1}var L=l.get(e),B=l.get(t);if(L&&B)return L==t&&B==e;var W=!0;l.set(e,t),l.set(t,e);for(var F=d;++E<g;){C=_[E];var V=e[C],K=t[C];if(i)var Ue=d?i(K,V,C,t,e,l):i(V,K,C,e,t,l);if(!(Ue===r?V===K||o(V,K,n,i,l):Ue)){W=!1;break}F||(F=C=="constructor")}if(W&&!F){var Re=e.constructor,He=t.constructor;Re!=He&&"constructor"in e&&"constructor"in t&&!(typeof Re=="function"&&Re instanceof Re&&typeof He=="function"&&He instanceof He)&&(W=!1)}return l.delete(e),l.delete(t),W}function pt(e){return iu(Sa(e,r,Pa),e+"")}function Ji(e){return Uo(e,be,eu)}function Zi(e){return Uo(e,Be,wa)}var Qi=vr?function(e){return vr.get(e)}:vu;function Ir(e){for(var t=e.name+"",n=an[t],i=Z.call(an,t)?n.length:0;i--;){var o=n[i],l=o.func;if(l==null||l==e)return o.name}return t}function cn(e){var t=Z.call(a,"placeholder")?a:e;return t.placeholder}function I(){var e=a.iteratee||pu;return e=e===pu?Go:e,arguments.length?e(arguments[0],arguments[1]):e}function Br(e,t){var n=e.__data__;return ad(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ji(e){for(var t=be(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,Aa(o)]}return t}function Kt(e,t){var n=ff(e,t);return Wo(n)?n:r}function ed(e){var t=Z.call(e,Wt),n=e[Wt];try{e[Wt]=r;var i=!0}catch{}var o=lr.call(e);return i&&(t?e[Wt]=n:delete e[Wt]),o}var eu=Oi?function(e){return e==null?[]:(e=ee(e),xt(Oi(e),function(t){return Co.call(e,t)}))}:mu,wa=Oi?function(e){for(var t=[];e;)At(t,eu(e)),e=dr(e);return t}:mu,Ce=Oe;(Ti&&Ce(new Ti(new ArrayBuffer(1)))!=Qt||On&&Ce(new On)!=Ze||Ri&&Ce(Ri.resolve())!=Du||on&&Ce(new on)!=Qe||Tn&&Ce(new Tn)!=An)&&(Ce=function(e){var t=Oe(e),n=t==ft?e.constructor:r,i=n?Xt(n):"";if(i)switch(i){case Nf:return Qt;case Mf:return Ze;case kf:return Du;case Uf:return Qe;case Hf:return An}return t});function td(e,t,n){for(var i=-1,o=n.length;++i<o;){var l=n[i],d=l.size;switch(l.type){case"drop":e+=d;break;case"dropRight":t-=d;break;case"take":t=Se(t,e+d);break;case"takeRight":e=ve(e,t-d);break}}return{start:e,end:t}}function nd(e){var t=e.match(al);return t?t[1].split(sl):[]}function ya(e,t,n){t=Tt(t,e);for(var i=-1,o=t.length,l=!1;++i<o;){var d=st(t[i]);if(!(l=e!=null&&n(e,d)))break;e=e[d]}return l||++i!=o?l:(o=e==null?0:e.length,!!o&&Ur(o)&&gt(d,o)&&(M(e)||Yt(e)))}function rd(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Z.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function xa(e){return typeof e.constructor=="function"&&!Mn(e)?sn(dr(e)):{}}function id(e,t,n){var i=e.constructor;switch(t){case En:return Xi(e);case mn:case bn:return new i(+e);case Qt:return Wc(e,n);case jr:case ei:case ti:case ni:case ri:case ii:case ui:case oi:case ai:return ia(e,n);case Ze:return new i;case wn:case xn:return new i(e);case yn:return Gc(e);case Qe:return new i;case jn:return $c(e)}}function ud(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(ol,`{
/* [wrapped with `+t+`] */
`)}function od(e){return M(e)||Yt(e)||!!(Oo&&e&&e[Oo])}function gt(e,t){var n=typeof e;return t=t??yt,!!t&&(n=="number"||n!="symbol"&&vl.test(e))&&e>-1&&e%1==0&&e<t}function Te(e,t,n){if(!ae(n))return!1;var i=typeof t;return(i=="number"?Ie(n)&&gt(t,n.length):i=="string"&&t in n)?tt(n[t],e):!1}function tu(e,t){if(M(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||ke(e)?!0:nl.test(e)||!tl.test(e)||t!=null&&e in ee(t)}function ad(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function nu(e){var t=Ir(e),n=a[t];if(typeof n!="function"||!(t in z.prototype))return!1;if(e===n)return!0;var i=Qi(n);return!!i&&e===i[0]}function sd(e){return!!Ao&&Ao in e}var ld=ar?vt:bu;function Mn(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||un;return e===n}function Aa(e){return e===e&&!ae(e)}function Ea(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in ee(n))}}function fd(e){var t=Mr(e,function(i){return n.size===D&&n.clear(),i}),n=t.cache;return t}function cd(e,t){var n=e[1],i=t[1],o=n|i,l=o<(q|ye|Je),d=i==Je&&n==Q||i==Je&&n==j&&e[7].length<=t[8]||i==(Je|j)&&t[7].length<=t[8]&&n==Q;if(!(l||d))return e;i&q&&(e[2]=t[2],o|=n&q?0:Pe);var _=t[3];if(_){var g=e[3];e[3]=g?oa(g,_,t[4]):_,e[4]=g?Et(e[3],U):t[4]}return _=t[5],_&&(g=e[5],e[5]=g?aa(g,_,t[6]):_,e[6]=g?Et(e[5],U):t[6]),_=t[7],_&&(e[7]=_),i&Je&&(e[8]=e[8]==null?t[8]:Se(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function dd(e){var t=[];if(e!=null)for(var n in ee(e))t.push(n);return t}function hd(e){return lr.call(e)}function Sa(e,t,n){return t=ve(t===r?e.length-1:t,0),function(){for(var i=arguments,o=-1,l=ve(i.length-t,0),d=b(l);++o<l;)d[o]=i[t+o];o=-1;for(var _=b(t+1);++o<t;)_[o]=i[o];return _[t]=n(d),De(e,this,_)}}function Ca(e,t){return t.length<2?e:zt(e,Ke(t,0,-1))}function _d(e,t){for(var n=e.length,i=Se(t.length,n),o=Le(e);i--;){var l=t[i];e[i]=gt(l,n)?o[l]:r}return e}function ru(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Oa=Ra(Jo),kn=Rf||function(e,t){return xe.setTimeout(e,t)},iu=Ra(Mc);function Ta(e,t,n){var i=t+"";return iu(e,ud(i,pd(nd(i),n)))}function Ra(e){var t=0,n=0;return function(){var i=Ff(),o=vn-(i-n);if(n=i,o>0){if(++t>=kt)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Fr(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var l=Hi(n,o),d=e[l];e[l]=e[n],e[n]=d}return e.length=t,e}var La=fd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(rl,function(n,i,o,l){t.push(o?l.replace(cl,"$1"):i||n)}),t});function st(e){if(typeof e=="string"||ke(e))return e;var t=e+"";return t=="0"&&1/e==-Ut?"-0":t}function Xt(e){if(e!=null){try{return sr.call(e)}catch{}try{return e+""}catch{}}return""}function pd(e,t){return Ge(Ws,function(n){var i="_."+n[0];t&n[1]&&!rr(e,i)&&e.push(i)}),e.sort()}function Ia(e){if(e instanceof z)return e.clone();var t=new Ve(e.__wrapped__,e.__chain__);return t.__actions__=Le(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function gd(e,t,n){(n?Te(e,t,n):t===r)?t=1:t=ve(k(t),0);var i=e==null?0:e.length;if(!i||t<1)return[];for(var o=0,l=0,d=b(pr(i/t));o<i;)d[l++]=Ke(e,o,o+=t);return d}function vd(e){for(var t=-1,n=e==null?0:e.length,i=0,o=[];++t<n;){var l=e[t];l&&(o[i++]=l)}return o}function md(){var e=arguments.length;if(!e)return[];for(var t=b(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return At(M(n)?Le(n):[n],Ae(t,1))}var bd=G(function(e,t){return ce(e)?Bn(e,Ae(t,1,ce,!0)):[]}),wd=G(function(e,t){var n=Xe(t);return ce(n)&&(n=r),ce(e)?Bn(e,Ae(t,1,ce,!0),I(n,2)):[]}),yd=G(function(e,t){var n=Xe(t);return ce(n)&&(n=r),ce(e)?Bn(e,Ae(t,1,ce,!0),r,n):[]});function xd(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:k(t),Ke(e,t<0?0:t,i)):[]}function Ad(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:k(t),t=i-t,Ke(e,0,t<0?0:t)):[]}function Ed(e,t){return e&&e.length?Sr(e,I(t,3),!0,!0):[]}function Sd(e,t){return e&&e.length?Sr(e,I(t,3),!0):[]}function Cd(e,t,n,i){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&Te(e,t,n)&&(n=0,i=o),mc(e,t,n,i)):[]}function Ba(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var o=n==null?0:k(n);return o<0&&(o=ve(i+o,0)),ir(e,I(t,3),o)}function Fa(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=k(n),o=n<0?ve(i+o,0):Se(o,i-1)),ir(e,I(t,3),o,!0)}function Pa(e){var t=e==null?0:e.length;return t?Ae(e,1):[]}function Od(e){var t=e==null?0:e.length;return t?Ae(e,Ut):[]}function Td(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:k(t),Ae(e,t)):[]}function Rd(e){for(var t=-1,n=e==null?0:e.length,i={};++t<n;){var o=e[t];i[o[0]]=o[1]}return i}function Da(e){return e&&e.length?e[0]:r}function Ld(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var o=n==null?0:k(n);return o<0&&(o=ve(i+o,0)),en(e,t,o)}function Id(e){var t=e==null?0:e.length;return t?Ke(e,0,-1):[]}var Bd=G(function(e){var t=oe(e,zi);return t.length&&t[0]===e[0]?Di(t):[]}),Fd=G(function(e){var t=Xe(e),n=oe(e,zi);return t===Xe(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Di(n,I(t,2)):[]}),Pd=G(function(e){var t=Xe(e),n=oe(e,zi);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Di(n,r,t):[]});function Dd(e,t){return e==null?"":If.call(e,t)}function Xe(e){var t=e==null?0:e.length;return t?e[t-1]:r}function Nd(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=k(n),o=o<0?ve(i+o,0):Se(o,i-1)),t===t?pf(e,t,o):ir(e,po,o,!0)}function Md(e,t){return e&&e.length?Ko(e,k(t)):r}var kd=G(Na);function Na(e,t){return e&&e.length&&t&&t.length?Ui(e,t):e}function Ud(e,t,n){return e&&e.length&&t&&t.length?Ui(e,t,I(n,2)):e}function Hd(e,t,n){return e&&e.length&&t&&t.length?Ui(e,t,r,n):e}var Wd=pt(function(e,t){var n=e==null?0:e.length,i=Ii(e,t);return qo(e,oe(t,function(o){return gt(o,n)?+o:o}).sort(ua)),i});function Gd(e,t){var n=[];if(!(e&&e.length))return n;var i=-1,o=[],l=e.length;for(t=I(t,3);++i<l;){var d=e[i];t(d,i,e)&&(n.push(d),o.push(i))}return qo(e,o),n}function uu(e){return e==null?e:Df.call(e)}function $d(e,t,n){var i=e==null?0:e.length;return i?(n&&typeof n!="number"&&Te(e,t,n)?(t=0,n=i):(t=t==null?0:k(t),n=n===r?i:k(n)),Ke(e,t,n)):[]}function Vd(e,t){return Er(e,t)}function zd(e,t,n){return Gi(e,t,I(n,2))}function Kd(e,t){var n=e==null?0:e.length;if(n){var i=Er(e,t);if(i<n&&tt(e[i],t))return i}return-1}function Xd(e,t){return Er(e,t,!0)}function Yd(e,t,n){return Gi(e,t,I(n,2),!0)}function qd(e,t){var n=e==null?0:e.length;if(n){var i=Er(e,t,!0)-1;if(tt(e[i],t))return i}return-1}function Jd(e){return e&&e.length?Zo(e):[]}function Zd(e,t){return e&&e.length?Zo(e,I(t,2)):[]}function Qd(e){var t=e==null?0:e.length;return t?Ke(e,1,t):[]}function jd(e,t,n){return e&&e.length?(t=n||t===r?1:k(t),Ke(e,0,t<0?0:t)):[]}function eh(e,t,n){var i=e==null?0:e.length;return i?(t=n||t===r?1:k(t),t=i-t,Ke(e,t<0?0:t,i)):[]}function th(e,t){return e&&e.length?Sr(e,I(t,3),!1,!0):[]}function nh(e,t){return e&&e.length?Sr(e,I(t,3)):[]}var rh=G(function(e){return Ot(Ae(e,1,ce,!0))}),ih=G(function(e){var t=Xe(e);return ce(t)&&(t=r),Ot(Ae(e,1,ce,!0),I(t,2))}),uh=G(function(e){var t=Xe(e);return t=typeof t=="function"?t:r,Ot(Ae(e,1,ce,!0),r,t)});function oh(e){return e&&e.length?Ot(e):[]}function ah(e,t){return e&&e.length?Ot(e,I(t,2)):[]}function sh(e,t){return t=typeof t=="function"?t:r,e&&e.length?Ot(e,r,t):[]}function ou(e){if(!(e&&e.length))return[];var t=0;return e=xt(e,function(n){if(ce(n))return t=ve(n.length,t),!0}),Ai(t,function(n){return oe(e,wi(n))})}function Ma(e,t){if(!(e&&e.length))return[];var n=ou(e);return t==null?n:oe(n,function(i){return De(t,r,i)})}var lh=G(function(e,t){return ce(e)?Bn(e,t):[]}),fh=G(function(e){return Vi(xt(e,ce))}),ch=G(function(e){var t=Xe(e);return ce(t)&&(t=r),Vi(xt(e,ce),I(t,2))}),dh=G(function(e){var t=Xe(e);return t=typeof t=="function"?t:r,Vi(xt(e,ce),r,t)}),hh=G(ou);function _h(e,t){return ta(e||[],t||[],In)}function ph(e,t){return ta(e||[],t||[],Dn)}var gh=G(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,Ma(e,n)});function ka(e){var t=a(e);return t.__chain__=!0,t}function vh(e,t){return t(e),e}function Pr(e,t){return t(e)}var mh=pt(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(l){return Ii(l,e)};return t>1||this.__actions__.length||!(i instanceof z)||!gt(n)?this.thru(o):(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:Pr,args:[o],thisArg:r}),new Ve(i,this.__chain__).thru(function(l){return t&&!l.length&&l.push(r),l}))});function bh(){return ka(this)}function wh(){return new Ve(this.value(),this.__chain__)}function yh(){this.__values__===r&&(this.__values__=Qa(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function xh(){return this}function Ah(e){for(var t,n=this;n instanceof br;){var i=Ia(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function Eh(){var e=this.__wrapped__;if(e instanceof z){var t=e;return this.__actions__.length&&(t=new z(this)),t=t.reverse(),t.__actions__.push({func:Pr,args:[uu],thisArg:r}),new Ve(t,this.__chain__)}return this.thru(uu)}function Sh(){return ea(this.__wrapped__,this.__actions__)}var Ch=Cr(function(e,t,n){Z.call(e,n)?++e[n]:ht(e,n,1)});function Oh(e,t,n){var i=M(e)?ho:vc;return n&&Te(e,t,n)&&(t=r),i(e,I(t,3))}function Th(e,t){var n=M(e)?xt:Mo;return n(e,I(t,3))}var Rh=ca(Ba),Lh=ca(Fa);function Ih(e,t){return Ae(Dr(e,t),1)}function Bh(e,t){return Ae(Dr(e,t),Ut)}function Fh(e,t,n){return n=n===r?1:k(n),Ae(Dr(e,t),n)}function Ua(e,t){var n=M(e)?Ge:Ct;return n(e,I(t,3))}function Ha(e,t){var n=M(e)?Zl:No;return n(e,I(t,3))}var Ph=Cr(function(e,t,n){Z.call(e,n)?e[n].push(t):ht(e,n,[t])});function Dh(e,t,n,i){e=Ie(e)?e:hn(e),n=n&&!i?k(n):0;var o=e.length;return n<0&&(n=ve(o+n,0)),Hr(e)?n<=o&&e.indexOf(t,n)>-1:!!o&&en(e,t,n)>-1}var Nh=G(function(e,t,n){var i=-1,o=typeof t=="function",l=Ie(e)?b(e.length):[];return Ct(e,function(d){l[++i]=o?De(t,d,n):Fn(d,t,n)}),l}),Mh=Cr(function(e,t,n){ht(e,n,t)});function Dr(e,t){var n=M(e)?oe:$o;return n(e,I(t,3))}function kh(e,t,n,i){return e==null?[]:(M(t)||(t=t==null?[]:[t]),n=i?r:n,M(n)||(n=n==null?[]:[n]),Xo(e,t,n))}var Uh=Cr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Hh(e,t,n){var i=M(e)?mi:vo,o=arguments.length<3;return i(e,I(t,4),n,o,Ct)}function Wh(e,t,n){var i=M(e)?Ql:vo,o=arguments.length<3;return i(e,I(t,4),n,o,No)}function Gh(e,t){var n=M(e)?xt:Mo;return n(e,kr(I(t,3)))}function $h(e){var t=M(e)?Bo:Dc;return t(e)}function Vh(e,t,n){(n?Te(e,t,n):t===r)?t=1:t=k(t);var i=M(e)?dc:Nc;return i(e,t)}function zh(e){var t=M(e)?hc:kc;return t(e)}function Kh(e){if(e==null)return 0;if(Ie(e))return Hr(e)?nn(e):e.length;var t=Ce(e);return t==Ze||t==Qe?e.size:Mi(e).length}function Xh(e,t,n){var i=M(e)?bi:Uc;return n&&Te(e,t,n)&&(t=r),i(e,I(t,3))}var Yh=G(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Te(e,t[0],t[1])?t=[]:n>2&&Te(t[0],t[1],t[2])&&(t=[t[0]]),Xo(e,Ae(t,1),[])}),Nr=Tf||function(){return xe.Date.now()};function qh(e,t){if(typeof t!="function")throw new $e(m);return e=k(e),function(){if(--e<1)return t.apply(this,arguments)}}function Wa(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,_t(e,Je,r,r,r,r,t)}function Ga(e,t){var n;if(typeof t!="function")throw new $e(m);return e=k(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var au=G(function(e,t,n){var i=q;if(n.length){var o=Et(n,cn(au));i|=me}return _t(e,i,t,n,o)}),$a=G(function(e,t,n){var i=q|ye;if(n.length){var o=Et(n,cn($a));i|=me}return _t(t,i,e,n,o)});function Va(e,t,n){t=n?r:t;var i=_t(e,Q,r,r,r,r,r,t);return i.placeholder=Va.placeholder,i}function za(e,t,n){t=n?r:t;var i=_t(e,ie,r,r,r,r,r,t);return i.placeholder=za.placeholder,i}function Ka(e,t,n){var i,o,l,d,_,g,y=0,x=!1,E=!1,C=!0;if(typeof e!="function")throw new $e(m);t=Ye(t)||0,ae(n)&&(x=!!n.leading,E="maxWait"in n,l=E?ve(Ye(n.maxWait)||0,t):l,C="trailing"in n?!!n.trailing:C);function L(de){var nt=i,bt=o;return i=o=r,y=de,d=e.apply(bt,nt),d}function B(de){return y=de,_=kn(V,t),x?L(de):d}function W(de){var nt=de-g,bt=de-y,cs=t-nt;return E?Se(cs,l-bt):cs}function F(de){var nt=de-g,bt=de-y;return g===r||nt>=t||nt<0||E&&bt>=l}function V(){var de=Nr();if(F(de))return K(de);_=kn(V,W(de))}function K(de){return _=r,C&&i?L(de):(i=o=r,d)}function Ue(){_!==r&&na(_),y=0,i=g=o=_=r}function Re(){return _===r?d:K(Nr())}function He(){var de=Nr(),nt=F(de);if(i=arguments,o=this,g=de,nt){if(_===r)return B(g);if(E)return na(_),_=kn(V,t),L(g)}return _===r&&(_=kn(V,t)),d}return He.cancel=Ue,He.flush=Re,He}var Jh=G(function(e,t){return Do(e,1,t)}),Zh=G(function(e,t,n){return Do(e,Ye(t)||0,n)});function Qh(e){return _t(e,fe)}function Mr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new $e(m);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],l=n.cache;if(l.has(o))return l.get(o);var d=e.apply(this,i);return n.cache=l.set(o,d)||l,d};return n.cache=new(Mr.Cache||dt),n}Mr.Cache=dt;function kr(e){if(typeof e!="function")throw new $e(m);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function jh(e){return Ga(2,e)}var e_=Hc(function(e,t){t=t.length==1&&M(t[0])?oe(t[0],Ne(I())):oe(Ae(t,1),Ne(I()));var n=t.length;return G(function(i){for(var o=-1,l=Se(i.length,n);++o<l;)i[o]=t[o].call(this,i[o]);return De(e,this,i)})}),su=G(function(e,t){var n=Et(t,cn(su));return _t(e,me,r,t,n)}),Xa=G(function(e,t){var n=Et(t,cn(Xa));return _t(e,wt,r,t,n)}),t_=pt(function(e,t){return _t(e,j,r,r,r,t)});function n_(e,t){if(typeof e!="function")throw new $e(m);return t=t===r?t:k(t),G(e,t)}function r_(e,t){if(typeof e!="function")throw new $e(m);return t=t==null?0:ve(k(t),0),G(function(n){var i=n[t],o=Rt(n,0,t);return i&&At(o,i),De(e,this,o)})}function i_(e,t,n){var i=!0,o=!0;if(typeof e!="function")throw new $e(m);return ae(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Ka(e,t,{leading:i,maxWait:t,trailing:o})}function u_(e){return Wa(e,1)}function o_(e,t){return su(Ki(t),e)}function a_(){if(!arguments.length)return[];var e=arguments[0];return M(e)?e:[e]}function s_(e){return ze(e,$)}function l_(e,t){return t=typeof t=="function"?t:r,ze(e,$,t)}function f_(e){return ze(e,T|$)}function c_(e,t){return t=typeof t=="function"?t:r,ze(e,T|$,t)}function d_(e,t){return t==null||Po(e,t,be(t))}function tt(e,t){return e===t||e!==e&&t!==t}var h_=Lr(Pi),__=Lr(function(e,t){return e>=t}),Yt=Ho(function(){return arguments}())?Ho:function(e){return le(e)&&Z.call(e,"callee")&&!Co.call(e,"callee")},M=b.isArray,p_=oo?Ne(oo):Ac;function Ie(e){return e!=null&&Ur(e.length)&&!vt(e)}function ce(e){return le(e)&&Ie(e)}function g_(e){return e===!0||e===!1||le(e)&&Oe(e)==mn}var Lt=Lf||bu,v_=ao?Ne(ao):Ec;function m_(e){return le(e)&&e.nodeType===1&&!Un(e)}function b_(e){if(e==null)return!0;if(Ie(e)&&(M(e)||typeof e=="string"||typeof e.splice=="function"||Lt(e)||dn(e)||Yt(e)))return!e.length;var t=Ce(e);if(t==Ze||t==Qe)return!e.size;if(Mn(e))return!Mi(e).length;for(var n in e)if(Z.call(e,n))return!1;return!0}function w_(e,t){return Pn(e,t)}function y_(e,t,n){n=typeof n=="function"?n:r;var i=n?n(e,t):r;return i===r?Pn(e,t,r,n):!!i}function lu(e){if(!le(e))return!1;var t=Oe(e);return t==Zn||t==$s||typeof e.message=="string"&&typeof e.name=="string"&&!Un(e)}function x_(e){return typeof e=="number"&&To(e)}function vt(e){if(!ae(e))return!1;var t=Oe(e);return t==Qn||t==Pu||t==Gs||t==zs}function Ya(e){return typeof e=="number"&&e==k(e)}function Ur(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=yt}function ae(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function le(e){return e!=null&&typeof e=="object"}var qa=so?Ne(so):Cc;function A_(e,t){return e===t||Ni(e,t,ji(t))}function E_(e,t,n){return n=typeof n=="function"?n:r,Ni(e,t,ji(t),n)}function S_(e){return Ja(e)&&e!=+e}function C_(e){if(ld(e))throw new N(h);return Wo(e)}function O_(e){return e===null}function T_(e){return e==null}function Ja(e){return typeof e=="number"||le(e)&&Oe(e)==wn}function Un(e){if(!le(e)||Oe(e)!=ft)return!1;var t=dr(e);if(t===null)return!0;var n=Z.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&sr.call(n)==Ef}var fu=lo?Ne(lo):Oc;function R_(e){return Ya(e)&&e>=-yt&&e<=yt}var Za=fo?Ne(fo):Tc;function Hr(e){return typeof e=="string"||!M(e)&&le(e)&&Oe(e)==xn}function ke(e){return typeof e=="symbol"||le(e)&&Oe(e)==jn}var dn=co?Ne(co):Rc;function L_(e){return e===r}function I_(e){return le(e)&&Ce(e)==An}function B_(e){return le(e)&&Oe(e)==Xs}var F_=Lr(ki),P_=Lr(function(e,t){return e<=t});function Qa(e){if(!e)return[];if(Ie(e))return Hr(e)?je(e):Le(e);if(Cn&&e[Cn])return df(e[Cn]());var t=Ce(e),n=t==Ze?Si:t==Qe?ur:hn;return n(e)}function mt(e){if(!e)return e===0?e:0;if(e=Ye(e),e===Ut||e===-Ut){var t=e<0?-1:1;return t*ks}return e===e?e:0}function k(e){var t=mt(e),n=t%1;return t===t?n?t-n:t:0}function ja(e){return e?Vt(k(e),0,ut):0}function Ye(e){if(typeof e=="number")return e;if(ke(e))return qn;if(ae(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ae(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=mo(e);var n=_l.test(e);return n||gl.test(e)?Yl(e.slice(2),n?2:8):hl.test(e)?qn:+e}function es(e){return at(e,Be(e))}function D_(e){return e?Vt(k(e),-yt,yt):e===0?e:0}function J(e){return e==null?"":Me(e)}var N_=ln(function(e,t){if(Mn(t)||Ie(t)){at(t,be(t),e);return}for(var n in t)Z.call(t,n)&&In(e,n,t[n])}),ts=ln(function(e,t){at(t,Be(t),e)}),Wr=ln(function(e,t,n,i){at(t,Be(t),e,i)}),M_=ln(function(e,t,n,i){at(t,be(t),e,i)}),k_=pt(Ii);function U_(e,t){var n=sn(e);return t==null?n:Fo(n,t)}var H_=G(function(e,t){e=ee(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&Te(t[0],t[1],o)&&(i=1);++n<i;)for(var l=t[n],d=Be(l),_=-1,g=d.length;++_<g;){var y=d[_],x=e[y];(x===r||tt(x,un[y])&&!Z.call(e,y))&&(e[y]=l[y])}return e}),W_=G(function(e){return e.push(r,ma),De(ns,r,e)});function G_(e,t){return _o(e,I(t,3),ot)}function $_(e,t){return _o(e,I(t,3),Fi)}function V_(e,t){return e==null?e:Bi(e,I(t,3),Be)}function z_(e,t){return e==null?e:ko(e,I(t,3),Be)}function K_(e,t){return e&&ot(e,I(t,3))}function X_(e,t){return e&&Fi(e,I(t,3))}function Y_(e){return e==null?[]:xr(e,be(e))}function q_(e){return e==null?[]:xr(e,Be(e))}function cu(e,t,n){var i=e==null?r:zt(e,t);return i===r?n:i}function J_(e,t){return e!=null&&ya(e,t,bc)}function du(e,t){return e!=null&&ya(e,t,wc)}var Z_=ha(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=lr.call(t)),e[t]=n},_u(Fe)),Q_=ha(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=lr.call(t)),Z.call(e,t)?e[t].push(n):e[t]=[n]},I),j_=G(Fn);function be(e){return Ie(e)?Io(e):Mi(e)}function Be(e){return Ie(e)?Io(e,!0):Lc(e)}function ep(e,t){var n={};return t=I(t,3),ot(e,function(i,o,l){ht(n,t(i,o,l),i)}),n}function tp(e,t){var n={};return t=I(t,3),ot(e,function(i,o,l){ht(n,o,t(i,o,l))}),n}var np=ln(function(e,t,n){Ar(e,t,n)}),ns=ln(function(e,t,n,i){Ar(e,t,n,i)}),rp=pt(function(e,t){var n={};if(e==null)return n;var i=!1;t=oe(t,function(l){return l=Tt(l,e),i||(i=l.length>1),l}),at(e,Zi(e),n),i&&(n=ze(n,T|H|$,Zc));for(var o=t.length;o--;)$i(n,t[o]);return n});function ip(e,t){return rs(e,kr(I(t)))}var up=pt(function(e,t){return e==null?{}:Bc(e,t)});function rs(e,t){if(e==null)return{};var n=oe(Zi(e),function(i){return[i]});return t=I(t),Yo(e,n,function(i,o){return t(i,o[0])})}function op(e,t,n){t=Tt(t,e);var i=-1,o=t.length;for(o||(o=1,e=r);++i<o;){var l=e==null?r:e[st(t[i])];l===r&&(i=o,l=n),e=vt(l)?l.call(e):l}return e}function ap(e,t,n){return e==null?e:Dn(e,t,n)}function sp(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:Dn(e,t,n,i)}var is=ga(be),us=ga(Be);function lp(e,t,n){var i=M(e),o=i||Lt(e)||dn(e);if(t=I(t,4),n==null){var l=e&&e.constructor;o?n=i?new l:[]:ae(e)?n=vt(l)?sn(dr(e)):{}:n={}}return(o?Ge:ot)(e,function(d,_,g){return t(n,d,_,g)}),n}function fp(e,t){return e==null?!0:$i(e,t)}function cp(e,t,n){return e==null?e:jo(e,t,Ki(n))}function dp(e,t,n,i){return i=typeof i=="function"?i:r,e==null?e:jo(e,t,Ki(n),i)}function hn(e){return e==null?[]:Ei(e,be(e))}function hp(e){return e==null?[]:Ei(e,Be(e))}function _p(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Ye(n),n=n===n?n:0),t!==r&&(t=Ye(t),t=t===t?t:0),Vt(Ye(e),t,n)}function pp(e,t,n){return t=mt(t),n===r?(n=t,t=0):n=mt(n),e=Ye(e),yc(e,t,n)}function gp(e,t,n){if(n&&typeof n!="boolean"&&Te(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=mt(e),t===r?(t=e,e=0):t=mt(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=Ro();return Se(e+o*(t-e+Xl("1e-"+((o+"").length-1))),t)}return Hi(e,t)}var vp=fn(function(e,t,n){return t=t.toLowerCase(),e+(n?os(t):t)});function os(e){return hu(J(e).toLowerCase())}function as(e){return e=J(e),e&&e.replace(ml,af).replace(Ml,"")}function mp(e,t,n){e=J(e),t=Me(t);var i=e.length;n=n===r?i:Vt(k(n),0,i);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function bp(e){return e=J(e),e&&Qs.test(e)?e.replace(Mu,sf):e}function wp(e){return e=J(e),e&&il.test(e)?e.replace(si,"\\$&"):e}var yp=fn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),xp=fn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ap=fa("toLowerCase");function Ep(e,t,n){e=J(e),t=k(t);var i=t?nn(e):0;if(!t||i>=t)return e;var o=(t-i)/2;return Rr(gr(o),n)+e+Rr(pr(o),n)}function Sp(e,t,n){e=J(e),t=k(t);var i=t?nn(e):0;return t&&i<t?e+Rr(t-i,n):e}function Cp(e,t,n){e=J(e),t=k(t);var i=t?nn(e):0;return t&&i<t?Rr(t-i,n)+e:e}function Op(e,t,n){return n||t==null?t=0:t&&(t=+t),Pf(J(e).replace(li,""),t||0)}function Tp(e,t,n){return(n?Te(e,t,n):t===r)?t=1:t=k(t),Wi(J(e),t)}function Rp(){var e=arguments,t=J(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var Lp=fn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function Ip(e,t,n){return n&&typeof n!="number"&&Te(e,t,n)&&(t=n=r),n=n===r?ut:n>>>0,n?(e=J(e),e&&(typeof t=="string"||t!=null&&!fu(t))&&(t=Me(t),!t&&tn(e))?Rt(je(e),0,n):e.split(t,n)):[]}var Bp=fn(function(e,t,n){return e+(n?" ":"")+hu(t)});function Fp(e,t,n){return e=J(e),n=n==null?0:Vt(k(n),0,e.length),t=Me(t),e.slice(n,n+t.length)==t}function Pp(e,t,n){var i=a.templateSettings;n&&Te(e,t,n)&&(t=r),e=J(e),t=Wr({},t,i,va);var o=Wr({},t.imports,i.imports,va),l=be(o),d=Ei(o,l),_,g,y=0,x=t.interpolate||er,E="__p += '",C=Ci((t.escape||er).source+"|"+x.source+"|"+(x===ku?dl:er).source+"|"+(t.evaluate||er).source+"|$","g"),L="//# sourceURL="+(Z.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gl+"]")+`
`;e.replace(C,function(F,V,K,Ue,Re,He){return K||(K=Ue),E+=e.slice(y,He).replace(bl,lf),V&&(_=!0,E+=`' +
__e(`+V+`) +
'`),Re&&(g=!0,E+=`';
`+Re+`;
__p += '`),K&&(E+=`' +
((__t = (`+K+`)) == null ? '' : __t) +
'`),y=He+F.length,F}),E+=`';
`;var B=Z.call(t,"variable")&&t.variable;if(!B)E=`with (obj) {
`+E+`
}
`;else if(fl.test(B))throw new N(S);E=(g?E.replace(Ys,""):E).replace(qs,"$1").replace(Js,"$1;"),E="function("+(B||"obj")+`) {
`+(B?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_?", __e = _.escape":"")+(g?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+E+`return __p
}`;var W=ls(function(){return Y(l,L+"return "+E).apply(r,d)});if(W.source=E,lu(W))throw W;return W}function Dp(e){return J(e).toLowerCase()}function Np(e){return J(e).toUpperCase()}function Mp(e,t,n){if(e=J(e),e&&(n||t===r))return mo(e);if(!e||!(t=Me(t)))return e;var i=je(e),o=je(t),l=bo(i,o),d=wo(i,o)+1;return Rt(i,l,d).join("")}function kp(e,t,n){if(e=J(e),e&&(n||t===r))return e.slice(0,xo(e)+1);if(!e||!(t=Me(t)))return e;var i=je(e),o=wo(i,je(t))+1;return Rt(i,0,o).join("")}function Up(e,t,n){if(e=J(e),e&&(n||t===r))return e.replace(li,"");if(!e||!(t=Me(t)))return e;var i=je(e),o=bo(i,je(t));return Rt(i,o).join("")}function Hp(e,t){var n=Mt,i=se;if(ae(t)){var o="separator"in t?t.separator:o;n="length"in t?k(t.length):n,i="omission"in t?Me(t.omission):i}e=J(e);var l=e.length;if(tn(e)){var d=je(e);l=d.length}if(n>=l)return e;var _=n-nn(i);if(_<1)return i;var g=d?Rt(d,0,_).join(""):e.slice(0,_);if(o===r)return g+i;if(d&&(_+=g.length-_),fu(o)){if(e.slice(_).search(o)){var y,x=g;for(o.global||(o=Ci(o.source,J(Uu.exec(o))+"g")),o.lastIndex=0;y=o.exec(x);)var E=y.index;g=g.slice(0,E===r?_:E)}}else if(e.indexOf(Me(o),_)!=_){var C=g.lastIndexOf(o);C>-1&&(g=g.slice(0,C))}return g+i}function Wp(e){return e=J(e),e&&Zs.test(e)?e.replace(Nu,gf):e}var Gp=fn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),hu=fa("toUpperCase");function ss(e,t,n){return e=J(e),t=n?r:t,t===r?cf(e)?bf(e):tf(e):e.match(t)||[]}var ls=G(function(e,t){try{return De(e,r,t)}catch(n){return lu(n)?n:new N(n)}}),$p=pt(function(e,t){return Ge(t,function(n){n=st(n),ht(e,n,au(e[n],e))}),e});function Vp(e){var t=e==null?0:e.length,n=I();return e=t?oe(e,function(i){if(typeof i[1]!="function")throw new $e(m);return[n(i[0]),i[1]]}):[],G(function(i){for(var o=-1;++o<t;){var l=e[o];if(De(l[0],this,i))return De(l[1],this,i)}})}function zp(e){return gc(ze(e,T))}function _u(e){return function(){return e}}function Kp(e,t){return e==null||e!==e?t:e}var Xp=da(),Yp=da(!0);function Fe(e){return e}function pu(e){return Go(typeof e=="function"?e:ze(e,T))}function qp(e){return Vo(ze(e,T))}function Jp(e,t){return zo(e,ze(t,T))}var Zp=G(function(e,t){return function(n){return Fn(n,e,t)}}),Qp=G(function(e,t){return function(n){return Fn(e,n,t)}});function gu(e,t,n){var i=be(t),o=xr(t,i);n==null&&!(ae(t)&&(o.length||!i.length))&&(n=t,t=e,e=this,o=xr(t,be(t)));var l=!(ae(n)&&"chain"in n)||!!n.chain,d=vt(e);return Ge(o,function(_){var g=t[_];e[_]=g,d&&(e.prototype[_]=function(){var y=this.__chain__;if(l||y){var x=e(this.__wrapped__),E=x.__actions__=Le(this.__actions__);return E.push({func:g,args:arguments,thisArg:e}),x.__chain__=y,x}return g.apply(e,At([this.value()],arguments))})}),e}function jp(){return xe._===this&&(xe._=Sf),this}function vu(){}function eg(e){return e=k(e),G(function(t){return Ko(t,e)})}var tg=Yi(oe),ng=Yi(ho),rg=Yi(bi);function fs(e){return tu(e)?wi(st(e)):Fc(e)}function ig(e){return function(t){return e==null?r:zt(e,t)}}var ug=_a(),og=_a(!0);function mu(){return[]}function bu(){return!1}function ag(){return{}}function sg(){return""}function lg(){return!0}function fg(e,t){if(e=k(e),e<1||e>yt)return[];var n=ut,i=Se(e,ut);t=I(t),e-=ut;for(var o=Ai(i,t);++n<e;)t(n);return o}function cg(e){return M(e)?oe(e,st):ke(e)?[e]:Le(La(J(e)))}function dg(e){var t=++Af;return J(e)+t}var hg=Tr(function(e,t){return e+t},0),_g=qi("ceil"),pg=Tr(function(e,t){return e/t},1),gg=qi("floor");function vg(e){return e&&e.length?yr(e,Fe,Pi):r}function mg(e,t){return e&&e.length?yr(e,I(t,2),Pi):r}function bg(e){return go(e,Fe)}function wg(e,t){return go(e,I(t,2))}function yg(e){return e&&e.length?yr(e,Fe,ki):r}function xg(e,t){return e&&e.length?yr(e,I(t,2),ki):r}var Ag=Tr(function(e,t){return e*t},1),Eg=qi("round"),Sg=Tr(function(e,t){return e-t},0);function Cg(e){return e&&e.length?xi(e,Fe):0}function Og(e,t){return e&&e.length?xi(e,I(t,2)):0}return a.after=qh,a.ary=Wa,a.assign=N_,a.assignIn=ts,a.assignInWith=Wr,a.assignWith=M_,a.at=k_,a.before=Ga,a.bind=au,a.bindAll=$p,a.bindKey=$a,a.castArray=a_,a.chain=ka,a.chunk=gd,a.compact=vd,a.concat=md,a.cond=Vp,a.conforms=zp,a.constant=_u,a.countBy=Ch,a.create=U_,a.curry=Va,a.curryRight=za,a.debounce=Ka,a.defaults=H_,a.defaultsDeep=W_,a.defer=Jh,a.delay=Zh,a.difference=bd,a.differenceBy=wd,a.differenceWith=yd,a.drop=xd,a.dropRight=Ad,a.dropRightWhile=Ed,a.dropWhile=Sd,a.fill=Cd,a.filter=Th,a.flatMap=Ih,a.flatMapDeep=Bh,a.flatMapDepth=Fh,a.flatten=Pa,a.flattenDeep=Od,a.flattenDepth=Td,a.flip=Qh,a.flow=Xp,a.flowRight=Yp,a.fromPairs=Rd,a.functions=Y_,a.functionsIn=q_,a.groupBy=Ph,a.initial=Id,a.intersection=Bd,a.intersectionBy=Fd,a.intersectionWith=Pd,a.invert=Z_,a.invertBy=Q_,a.invokeMap=Nh,a.iteratee=pu,a.keyBy=Mh,a.keys=be,a.keysIn=Be,a.map=Dr,a.mapKeys=ep,a.mapValues=tp,a.matches=qp,a.matchesProperty=Jp,a.memoize=Mr,a.merge=np,a.mergeWith=ns,a.method=Zp,a.methodOf=Qp,a.mixin=gu,a.negate=kr,a.nthArg=eg,a.omit=rp,a.omitBy=ip,a.once=jh,a.orderBy=kh,a.over=tg,a.overArgs=e_,a.overEvery=ng,a.overSome=rg,a.partial=su,a.partialRight=Xa,a.partition=Uh,a.pick=up,a.pickBy=rs,a.property=fs,a.propertyOf=ig,a.pull=kd,a.pullAll=Na,a.pullAllBy=Ud,a.pullAllWith=Hd,a.pullAt=Wd,a.range=ug,a.rangeRight=og,a.rearg=t_,a.reject=Gh,a.remove=Gd,a.rest=n_,a.reverse=uu,a.sampleSize=Vh,a.set=ap,a.setWith=sp,a.shuffle=zh,a.slice=$d,a.sortBy=Yh,a.sortedUniq=Jd,a.sortedUniqBy=Zd,a.split=Ip,a.spread=r_,a.tail=Qd,a.take=jd,a.takeRight=eh,a.takeRightWhile=th,a.takeWhile=nh,a.tap=vh,a.throttle=i_,a.thru=Pr,a.toArray=Qa,a.toPairs=is,a.toPairsIn=us,a.toPath=cg,a.toPlainObject=es,a.transform=lp,a.unary=u_,a.union=rh,a.unionBy=ih,a.unionWith=uh,a.uniq=oh,a.uniqBy=ah,a.uniqWith=sh,a.unset=fp,a.unzip=ou,a.unzipWith=Ma,a.update=cp,a.updateWith=dp,a.values=hn,a.valuesIn=hp,a.without=lh,a.words=ss,a.wrap=o_,a.xor=fh,a.xorBy=ch,a.xorWith=dh,a.zip=hh,a.zipObject=_h,a.zipObjectDeep=ph,a.zipWith=gh,a.entries=is,a.entriesIn=us,a.extend=ts,a.extendWith=Wr,gu(a,a),a.add=hg,a.attempt=ls,a.camelCase=vp,a.capitalize=os,a.ceil=_g,a.clamp=_p,a.clone=s_,a.cloneDeep=f_,a.cloneDeepWith=c_,a.cloneWith=l_,a.conformsTo=d_,a.deburr=as,a.defaultTo=Kp,a.divide=pg,a.endsWith=mp,a.eq=tt,a.escape=bp,a.escapeRegExp=wp,a.every=Oh,a.find=Rh,a.findIndex=Ba,a.findKey=G_,a.findLast=Lh,a.findLastIndex=Fa,a.findLastKey=$_,a.floor=gg,a.forEach=Ua,a.forEachRight=Ha,a.forIn=V_,a.forInRight=z_,a.forOwn=K_,a.forOwnRight=X_,a.get=cu,a.gt=h_,a.gte=__,a.has=J_,a.hasIn=du,a.head=Da,a.identity=Fe,a.includes=Dh,a.indexOf=Ld,a.inRange=pp,a.invoke=j_,a.isArguments=Yt,a.isArray=M,a.isArrayBuffer=p_,a.isArrayLike=Ie,a.isArrayLikeObject=ce,a.isBoolean=g_,a.isBuffer=Lt,a.isDate=v_,a.isElement=m_,a.isEmpty=b_,a.isEqual=w_,a.isEqualWith=y_,a.isError=lu,a.isFinite=x_,a.isFunction=vt,a.isInteger=Ya,a.isLength=Ur,a.isMap=qa,a.isMatch=A_,a.isMatchWith=E_,a.isNaN=S_,a.isNative=C_,a.isNil=T_,a.isNull=O_,a.isNumber=Ja,a.isObject=ae,a.isObjectLike=le,a.isPlainObject=Un,a.isRegExp=fu,a.isSafeInteger=R_,a.isSet=Za,a.isString=Hr,a.isSymbol=ke,a.isTypedArray=dn,a.isUndefined=L_,a.isWeakMap=I_,a.isWeakSet=B_,a.join=Dd,a.kebabCase=yp,a.last=Xe,a.lastIndexOf=Nd,a.lowerCase=xp,a.lowerFirst=Ap,a.lt=F_,a.lte=P_,a.max=vg,a.maxBy=mg,a.mean=bg,a.meanBy=wg,a.min=yg,a.minBy=xg,a.stubArray=mu,a.stubFalse=bu,a.stubObject=ag,a.stubString=sg,a.stubTrue=lg,a.multiply=Ag,a.nth=Md,a.noConflict=jp,a.noop=vu,a.now=Nr,a.pad=Ep,a.padEnd=Sp,a.padStart=Cp,a.parseInt=Op,a.random=gp,a.reduce=Hh,a.reduceRight=Wh,a.repeat=Tp,a.replace=Rp,a.result=op,a.round=Eg,a.runInContext=p,a.sample=$h,a.size=Kh,a.snakeCase=Lp,a.some=Xh,a.sortedIndex=Vd,a.sortedIndexBy=zd,a.sortedIndexOf=Kd,a.sortedLastIndex=Xd,a.sortedLastIndexBy=Yd,a.sortedLastIndexOf=qd,a.startCase=Bp,a.startsWith=Fp,a.subtract=Sg,a.sum=Cg,a.sumBy=Og,a.template=Pp,a.times=fg,a.toFinite=mt,a.toInteger=k,a.toLength=ja,a.toLower=Dp,a.toNumber=Ye,a.toSafeInteger=D_,a.toString=J,a.toUpper=Np,a.trim=Mp,a.trimEnd=kp,a.trimStart=Up,a.truncate=Hp,a.unescape=Wp,a.uniqueId=dg,a.upperCase=Gp,a.upperFirst=hu,a.each=Ua,a.eachRight=Ha,a.first=Da,gu(a,function(){var e={};return ot(a,function(t,n){Z.call(a.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),a.VERSION=f,Ge(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){a[e].placeholder=a}),Ge(["drop","take"],function(e,t){z.prototype[e]=function(n){n=n===r?1:ve(k(n),0);var i=this.__filtered__&&!t?new z(this):this.clone();return i.__filtered__?i.__takeCount__=Se(n,i.__takeCount__):i.__views__.push({size:Se(n,ut),type:e+(i.__dir__<0?"Right":"")}),i},z.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),Ge(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==Yn||n==Ms;z.prototype[e]=function(o){var l=this.clone();return l.__iteratees__.push({iteratee:I(o,3),type:n}),l.__filtered__=l.__filtered__||i,l}}),Ge(["head","last"],function(e,t){var n="take"+(t?"Right":"");z.prototype[e]=function(){return this[n](1).value()[0]}}),Ge(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");z.prototype[e]=function(){return this.__filtered__?new z(this):this[n](1)}}),z.prototype.compact=function(){return this.filter(Fe)},z.prototype.find=function(e){return this.filter(e).head()},z.prototype.findLast=function(e){return this.reverse().find(e)},z.prototype.invokeMap=G(function(e,t){return typeof e=="function"?new z(this):this.map(function(n){return Fn(n,e,t)})}),z.prototype.reject=function(e){return this.filter(kr(I(e)))},z.prototype.slice=function(e,t){e=k(e);var n=this;return n.__filtered__&&(e>0||t<0)?new z(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=k(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},z.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},z.prototype.toArray=function(){return this.take(ut)},ot(z.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=a[i?"take"+(t=="last"?"Right":""):t],l=i||/^find/.test(t);o&&(a.prototype[t]=function(){var d=this.__wrapped__,_=i?[1]:arguments,g=d instanceof z,y=_[0],x=g||M(d),E=function(V){var K=o.apply(a,At([V],_));return i&&C?K[0]:K};x&&n&&typeof y=="function"&&y.length!=1&&(g=x=!1);var C=this.__chain__,L=!!this.__actions__.length,B=l&&!C,W=g&&!L;if(!l&&x){d=W?d:new z(this);var F=e.apply(d,_);return F.__actions__.push({func:Pr,args:[E],thisArg:r}),new Ve(F,C)}return B&&W?e.apply(this,_):(F=this.thru(E),B?i?F.value()[0]:F.value():F)})}),Ge(["pop","push","shift","sort","splice","unshift"],function(e){var t=or[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);a.prototype[e]=function(){var o=arguments;if(i&&!this.__chain__){var l=this.value();return t.apply(M(l)?l:[],o)}return this[n](function(d){return t.apply(M(d)?d:[],o)})}}),ot(z.prototype,function(e,t){var n=a[t];if(n){var i=n.name+"";Z.call(an,i)||(an[i]=[]),an[i].push({name:t,func:n})}}),an[Or(r,ye).name]=[{name:"wrapper",func:r}],z.prototype.clone=Wf,z.prototype.reverse=Gf,z.prototype.value=$f,a.prototype.at=mh,a.prototype.chain=bh,a.prototype.commit=wh,a.prototype.next=yh,a.prototype.plant=Ah,a.prototype.reverse=Eh,a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=Sh,a.prototype.first=a.prototype.head,Cn&&(a.prototype[Cn]=xh),a},rn=wf();Ht?((Ht.exports=rn)._=rn,pi._=rn):xe._=rn}).call(Hn)})(Vr,Vr.exports);var $n=Vr.exports;const Ts=s=>(Jr("data-v-ad6a57aa"),s=s(),Zr(),s),uv={class:"right-bar-scene-item"},ov=Ts(()=>pe("span",null,"场景选择",-1)),av=Ts(()=>pe("span",null,"场景名:",-1)),sv={class:"right-bar-scene-button-list"},lv=Xr({__name:"rightBarScene",setup(s){const u=Yr(),{abhStage:r,sceneNeedSave:f}=qr(u),c=qe([]),h=qe(""),m=qe({id:"",name:""}),S=()=>{f.value?ds.confirm("当前场景未保存，是否继续新建场景?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{h.value="",m.value={id:"",name:""},r.value.clearScene(),r.value.resetStage(),r.value.setBasicStage(),Ee({type:"success",message:"已创建新场景"})}).catch(()=>{Ee({type:"info",message:"已取消"})}):(h.value="",m.value={id:"",name:""},r.value.clearScene(),r.value.resetStage(),r.value.setBasicStage(),Ee({type:"success",message:"已创建新场景"}))},O=()=>{f.value=!0},D=()=>{f.value?ds.confirm("当前场景未保存，是否继续载入场景?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{m.value=$n.find(c.value,$=>$.id==h.value),r.value.clearScene(),r.value.resetStage(),r.value.loadScene(h.value)}).catch(()=>{Ee({type:"info",message:"已取消"})}):(m.value=$n.find(c.value,$=>$.id==h.value),r.value.clearScene(),r.value.resetStage(),r.value.loadScene(h.value))},U=async()=>{if(m.value.name!=="")try{let $=await r.value.saveScene(m.value);$n.findIndex(c.value,X=>X.id==$.id)==-1&&c.value.push($),localStorage.setItem("sceneList",JSON.stringify(c.value)),h.value=$.id,f.value=!1,Ee({message:"save scene success",type:"success",plain:!0})}catch($){console.log($),Ee({message:"save scene fail",type:"error",plain:!0})}else Ee({message:"场景未命名",type:"warning",plain:!0})},T=async()=>{try{f.value=!1,h.value!==""&&(await Pg.removeItem(h.value),$n.remove(c.value,$=>$.id==h.value),localStorage.setItem("sceneList",JSON.stringify(c.value))),c.value.length?(m.value=c.value[0],h.value=m.value.id,D()):S(),Ee({message:"model delete from scene Success",type:"success",plain:!0})}catch{Ee({message:"model delete from scene error",type:"error",plain:!0})}},H=()=>{let $=localStorage.getItem("sceneList");c.value=$?JSON.parse($):[]};return Ss(()=>{H()}),($,X)=>(It(),qt("div",uv,[ov,ne(he(Fg),{modelValue:h.value,"onUpdate:modelValue":X[0]||(X[0]=P=>h.value=P),placeholder:"选择场景",size:"large",onChange:D},{default:_e(()=>[(It(!0),qt(Cs,null,Os(c.value,P=>(It(),Ig(he(Bg),{key:P.id,label:P.name,value:P.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),av,ne(he(yu),{type:"text",onChange:O,modelValue:m.value.name,"onUpdate:modelValue":X[1]||(X[1]=P=>m.value.name=P),placeholder:"未命名场景(点击命名)",onfocus:"this.placeholder=''",onblur:"this.placeholder='未命名场景(点击命名)'"},null,8,["modelValue"]),pe("div",sv,[ne(he(Ft),{class:"right-bar-scene-button",onClick:S},{default:_e(()=>[Bt("新建")]),_:1}),ne(he(Ft),{class:"right-bar-scene-button",onClick:U},{default:_e(()=>[Bt("保存")]),_:1}),ne(he(Ft),{class:"right-bar-scene-button",onClick:T},{default:_e(()=>[Bt("删除")]),_:1})])]))}}),fv=Qr(lv,[["__scopeId","data-v-ad6a57aa"]]);function cv(s){if(s&&!(typeof window>"u")){var u=document.createElement("style");return u.setAttribute("type","text/css"),u.innerHTML=s,document.head.appendChild(u),s}}function gn(s,u){var r=s.__state.conversionName.toString(),f=Math.round(s.r),c=Math.round(s.g),h=Math.round(s.b),m=s.a,S=Math.round(s.h),O=s.s.toFixed(1),D=s.v.toFixed(1);if(u||r==="THREE_CHAR_HEX"||r==="SIX_CHAR_HEX"){for(var U=s.hex.toString(16);U.length<6;)U="0"+U;return"#"+U}else{if(r==="CSS_RGB")return"rgb("+f+","+c+","+h+")";if(r==="CSS_RGBA")return"rgba("+f+","+c+","+h+","+m+")";if(r==="HEX")return"0x"+s.hex.toString(16);if(r==="RGB_ARRAY")return"["+f+","+c+","+h+"]";if(r==="RGBA_ARRAY")return"["+f+","+c+","+h+","+m+"]";if(r==="RGB_OBJ")return"{r:"+f+",g:"+c+",b:"+h+"}";if(r==="RGBA_OBJ")return"{r:"+f+",g:"+c+",b:"+h+",a:"+m+"}";if(r==="HSV_OBJ")return"{h:"+S+",s:"+O+",v:"+D+"}";if(r==="HSVA_OBJ")return"{h:"+S+",s:"+O+",v:"+D+",a:"+m+"}"}return"unknown format"}var hs=Array.prototype.forEach,Wn=Array.prototype.slice,A={BREAK:{},extend:function(u){return this.each(Wn.call(arguments,1),function(r){var f=this.isObject(r)?Object.keys(r):[];f.forEach((function(c){this.isUndefined(r[c])||(u[c]=r[c])}).bind(this))},this),u},defaults:function(u){return this.each(Wn.call(arguments,1),function(r){var f=this.isObject(r)?Object.keys(r):[];f.forEach((function(c){this.isUndefined(u[c])&&(u[c]=r[c])}).bind(this))},this),u},compose:function(){var u=Wn.call(arguments);return function(){for(var r=Wn.call(arguments),f=u.length-1;f>=0;f--)r=[u[f].apply(this,r)];return r[0]}},each:function(u,r,f){if(u){if(hs&&u.forEach&&u.forEach===hs)u.forEach(r,f);else if(u.length===u.length+0){var c=void 0,h=void 0;for(c=0,h=u.length;c<h;c++)if(c in u&&r.call(f,u[c],c)===this.BREAK)return}else for(var m in u)if(r.call(f,u[m],m)===this.BREAK)return}},defer:function(u){setTimeout(u,0)},debounce:function(u,r,f){var c=void 0;return function(){var h=this,m=arguments;function S(){c=null,f||u.apply(h,m)}var O=f||!c;clearTimeout(c),c=setTimeout(S,r),O&&u.apply(h,m)}},toArray:function(u){return u.toArray?u.toArray():Wn.call(u)},isUndefined:function(u){return u===void 0},isNull:function(u){return u===null},isNaN:function(s){function u(r){return s.apply(this,arguments)}return u.toString=function(){return s.toString()},u}(function(s){return isNaN(s)}),isArray:Array.isArray||function(s){return s.constructor===Array},isObject:function(u){return u===Object(u)},isNumber:function(u){return u===u+0},isString:function(u){return u===u+""},isBoolean:function(u){return u===!1||u===!0},isFunction:function(u){return u instanceof Function}},dv=[{litmus:A.isString,conversions:{THREE_CHAR_HEX:{read:function(u){var r=u.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return r===null?!1:{space:"HEX",hex:parseInt("0x"+r[1].toString()+r[1].toString()+r[2].toString()+r[2].toString()+r[3].toString()+r[3].toString(),0)}},write:gn},SIX_CHAR_HEX:{read:function(u){var r=u.match(/^#([A-F0-9]{6})$/i);return r===null?!1:{space:"HEX",hex:parseInt("0x"+r[1].toString(),0)}},write:gn},CSS_RGB:{read:function(u){var r=u.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return r===null?!1:{space:"RGB",r:parseFloat(r[1]),g:parseFloat(r[2]),b:parseFloat(r[3])}},write:gn},CSS_RGBA:{read:function(u){var r=u.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return r===null?!1:{space:"RGB",r:parseFloat(r[1]),g:parseFloat(r[2]),b:parseFloat(r[3]),a:parseFloat(r[4])}},write:gn}}},{litmus:A.isNumber,conversions:{HEX:{read:function(u){return{space:"HEX",hex:u,conversionName:"HEX"}},write:function(u){return u.hex}}}},{litmus:A.isArray,conversions:{RGB_ARRAY:{read:function(u){return u.length!==3?!1:{space:"RGB",r:u[0],g:u[1],b:u[2]}},write:function(u){return[u.r,u.g,u.b]}},RGBA_ARRAY:{read:function(u){return u.length!==4?!1:{space:"RGB",r:u[0],g:u[1],b:u[2],a:u[3]}},write:function(u){return[u.r,u.g,u.b,u.a]}}}},{litmus:A.isObject,conversions:{RGBA_OBJ:{read:function(u){return A.isNumber(u.r)&&A.isNumber(u.g)&&A.isNumber(u.b)&&A.isNumber(u.a)?{space:"RGB",r:u.r,g:u.g,b:u.b,a:u.a}:!1},write:function(u){return{r:u.r,g:u.g,b:u.b,a:u.a}}},RGB_OBJ:{read:function(u){return A.isNumber(u.r)&&A.isNumber(u.g)&&A.isNumber(u.b)?{space:"RGB",r:u.r,g:u.g,b:u.b}:!1},write:function(u){return{r:u.r,g:u.g,b:u.b}}},HSVA_OBJ:{read:function(u){return A.isNumber(u.h)&&A.isNumber(u.s)&&A.isNumber(u.v)&&A.isNumber(u.a)?{space:"HSV",h:u.h,s:u.s,v:u.v,a:u.a}:!1},write:function(u){return{h:u.h,s:u.s,v:u.v,a:u.a}}},HSV_OBJ:{read:function(u){return A.isNumber(u.h)&&A.isNumber(u.s)&&A.isNumber(u.v)?{space:"HSV",h:u.h,s:u.s,v:u.v}:!1},write:function(u){return{h:u.h,s:u.s,v:u.v}}}}}],Gn=void 0,Gr=void 0,Au=function(){Gr=!1;var u=arguments.length>1?A.toArray(arguments):arguments[0];return A.each(dv,function(r){if(r.litmus(u))return A.each(r.conversions,function(f,c){if(Gn=f.read(u),Gr===!1&&Gn!==!1)return Gr=Gn,Gn.conversionName=c,Gn.conversion=f,A.BREAK}),A.BREAK}),Gr},_s=void 0,zr={hsv_to_rgb:function(u,r,f){var c=Math.floor(u/60)%6,h=u/60-Math.floor(u/60),m=f*(1-r),S=f*(1-h*r),O=f*(1-(1-h)*r),D=[[f,O,m],[S,f,m],[m,f,O],[m,S,f],[O,m,f],[f,m,S]][c];return{r:D[0]*255,g:D[1]*255,b:D[2]*255}},rgb_to_hsv:function(u,r,f){var c=Math.min(u,r,f),h=Math.max(u,r,f),m=h-c,S=void 0,O=void 0;if(h!==0)O=m/h;else return{h:NaN,s:0,v:0};return u===h?S=(r-f)/m:r===h?S=2+(f-u)/m:S=4+(u-r)/m,S/=6,S<0&&(S+=1),{h:S*360,s:O,v:h/255}},rgb_to_hex:function(u,r,f){var c=this.hex_with_component(0,2,u);return c=this.hex_with_component(c,1,r),c=this.hex_with_component(c,0,f),c},component_from_hex:function(u,r){return u>>r*8&255},hex_with_component:function(u,r,f){return f<<(_s=r*8)|u&~(255<<_s)}},hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rt=function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")},it=function(){function s(u,r){for(var f=0;f<r.length;f++){var c=r[f];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(u,c.key,c)}}return function(u,r,f){return r&&s(u.prototype,r),f&&s(u,f),u}}(),Pt=function s(u,r,f){u===null&&(u=Function.prototype);var c=Object.getOwnPropertyDescriptor(u,r);if(c===void 0){var h=Object.getPrototypeOf(u);return h===null?void 0:s(h,r,f)}else{if("value"in c)return c.value;var m=c.get;return m===void 0?void 0:m.call(f)}},Dt=function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);s.prototype=Object.create(u&&u.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(s,u):s.__proto__=u)},Nt=function(s,u){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:s},we=function(){function s(){if(rt(this,s),this.__state=Au.apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return it(s,[{key:"toString",value:function(){return gn(this)}},{key:"toHexString",value:function(){return gn(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),s}();function Lu(s,u,r){Object.defineProperty(s,u,{get:function(){return this.__state.space==="RGB"?this.__state[u]:(we.recalculateRGB(this,u,r),this.__state[u])},set:function(c){this.__state.space!=="RGB"&&(we.recalculateRGB(this,u,r),this.__state.space="RGB"),this.__state[u]=c}})}function Iu(s,u){Object.defineProperty(s,u,{get:function(){return this.__state.space==="HSV"?this.__state[u]:(we.recalculateHSV(this),this.__state[u])},set:function(f){this.__state.space!=="HSV"&&(we.recalculateHSV(this),this.__state.space="HSV"),this.__state[u]=f}})}we.recalculateRGB=function(s,u,r){if(s.__state.space==="HEX")s.__state[u]=zr.component_from_hex(s.__state.hex,r);else if(s.__state.space==="HSV")A.extend(s.__state,zr.hsv_to_rgb(s.__state.h,s.__state.s,s.__state.v));else throw new Error("Corrupted color state")};we.recalculateHSV=function(s){var u=zr.rgb_to_hsv(s.r,s.g,s.b);A.extend(s.__state,{s:u.s,v:u.v}),A.isNaN(u.h)?A.isUndefined(s.__state.h)&&(s.__state.h=0):s.__state.h=u.h};we.COMPONENTS=["r","g","b","h","s","v","hex","a"];Lu(we.prototype,"r",2);Lu(we.prototype,"g",1);Lu(we.prototype,"b",0);Iu(we.prototype,"h");Iu(we.prototype,"s");Iu(we.prototype,"v");Object.defineProperty(we.prototype,"a",{get:function(){return this.__state.a},set:function(u){this.__state.a=u}});Object.defineProperty(we.prototype,"hex",{get:function(){return this.__state.space!=="HEX"&&(this.__state.hex=zr.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(u){this.__state.space="HEX",this.__state.hex=u}});var Jt=function(){function s(u,r){rt(this,s),this.initialValue=u[r],this.domElement=document.createElement("div"),this.object=u,this.property=r,this.__onChange=void 0,this.__onFinishChange=void 0}return it(s,[{key:"onChange",value:function(r){return this.__onChange=r,this}},{key:"onFinishChange",value:function(r){return this.__onFinishChange=r,this}},{key:"setValue",value:function(r){return this.object[this.property]=r,this.__onChange&&this.__onChange.call(this,r),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),s}(),_v={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},Rs={};A.each(_v,function(s,u){A.each(s,function(r){Rs[r]=u})});var pv=/(\d+(\.\d+)?)px/;function lt(s){if(s==="0"||A.isUndefined(s))return 0;var u=s.match(pv);return A.isNull(u)?0:parseFloat(u[1])}var v={makeSelectable:function(u,r){u===void 0||u.style===void 0||(u.onselectstart=r?function(){return!1}:function(){},u.style.MozUserSelect=r?"auto":"none",u.style.KhtmlUserSelect=r?"auto":"none",u.unselectable=r?"on":"off")},makeFullscreen:function(u,r,f){var c=f,h=r;A.isUndefined(h)&&(h=!0),A.isUndefined(c)&&(c=!0),u.style.position="absolute",h&&(u.style.left=0,u.style.right=0),c&&(u.style.top=0,u.style.bottom=0)},fakeEvent:function(u,r,f,c){var h=f||{},m=Rs[r];if(!m)throw new Error("Event type "+r+" not supported.");var S=document.createEvent(m);switch(m){case"MouseEvents":{var O=h.x||h.clientX||0,D=h.y||h.clientY||0;S.initMouseEvent(r,h.bubbles||!1,h.cancelable||!0,window,h.clickCount||1,0,0,O,D,!1,!1,!1,!1,0,null);break}case"KeyboardEvents":{var U=S.initKeyboardEvent||S.initKeyEvent;A.defaults(h,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),U(r,h.bubbles||!1,h.cancelable,window,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.keyCode,h.charCode);break}default:{S.initEvent(r,h.bubbles||!1,h.cancelable||!0);break}}A.defaults(S,c),u.dispatchEvent(S)},bind:function(u,r,f,c){var h=c||!1;return u.addEventListener?u.addEventListener(r,f,h):u.attachEvent&&u.attachEvent("on"+r,f),v},unbind:function(u,r,f,c){var h=c||!1;return u.removeEventListener?u.removeEventListener(r,f,h):u.detachEvent&&u.detachEvent("on"+r,f),v},addClass:function(u,r){if(u.className===void 0)u.className=r;else if(u.className!==r){var f=u.className.split(/ +/);f.indexOf(r)===-1&&(f.push(r),u.className=f.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return v},removeClass:function(u,r){if(r)if(u.className===r)u.removeAttribute("class");else{var f=u.className.split(/ +/),c=f.indexOf(r);c!==-1&&(f.splice(c,1),u.className=f.join(" "))}else u.className=void 0;return v},hasClass:function(u,r){return new RegExp("(?:^|\\s+)"+r+"(?:\\s+|$)").test(u.className)||!1},getWidth:function(u){var r=getComputedStyle(u);return lt(r["border-left-width"])+lt(r["border-right-width"])+lt(r["padding-left"])+lt(r["padding-right"])+lt(r.width)},getHeight:function(u){var r=getComputedStyle(u);return lt(r["border-top-width"])+lt(r["border-bottom-width"])+lt(r["padding-top"])+lt(r["padding-bottom"])+lt(r.height)},getOffset:function(u){var r=u,f={left:0,top:0};if(r.offsetParent)do f.left+=r.offsetLeft,f.top+=r.offsetTop,r=r.offsetParent;while(r);return f},isActive:function(u){return u===document.activeElement&&(u.type||u.href)}},Ls=function(s){Dt(u,s);function u(r,f){rt(this,u);var c=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f)),h=c;c.__prev=c.getValue(),c.__checkbox=document.createElement("input"),c.__checkbox.setAttribute("type","checkbox");function m(){h.setValue(!h.__prev)}return v.bind(c.__checkbox,"change",m,!1),c.domElement.appendChild(c.__checkbox),c.updateDisplay(),c}return it(u,[{key:"setValue",value:function(f){var c=Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"setValue",this).call(this,f);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),c}},{key:"updateDisplay",value:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"updateDisplay",this).call(this)}}]),u}(Jt),gv=function(s){Dt(u,s);function u(r,f,c){rt(this,u);var h=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f)),m=c,S=h;if(h.__select=document.createElement("select"),A.isArray(m)){var O={};A.each(m,function(D){O[D]=D}),m=O}return A.each(m,function(D,U){var T=document.createElement("option");T.innerHTML=U,T.setAttribute("value",D),S.__select.appendChild(T)}),h.updateDisplay(),v.bind(h.__select,"change",function(){var D=this.options[this.selectedIndex].value;S.setValue(D)}),h.domElement.appendChild(h.__select),h}return it(u,[{key:"setValue",value:function(f){var c=Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"setValue",this).call(this,f);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),c}},{key:"updateDisplay",value:function(){return v.isActive(this.__select)?this:(this.__select.value=this.getValue(),Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"updateDisplay",this).call(this))}}]),u}(Jt),vv=function(s){Dt(u,s);function u(r,f){rt(this,u);var c=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f)),h=c;function m(){h.setValue(h.__input.value)}function S(){h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}return c.__input=document.createElement("input"),c.__input.setAttribute("type","text"),v.bind(c.__input,"keyup",m),v.bind(c.__input,"change",m),v.bind(c.__input,"blur",S),v.bind(c.__input,"keydown",function(O){O.keyCode===13&&this.blur()}),c.updateDisplay(),c.domElement.appendChild(c.__input),c}return it(u,[{key:"updateDisplay",value:function(){return v.isActive(this.__input)||(this.__input.value=this.getValue()),Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"updateDisplay",this).call(this)}}]),u}(Jt);function ps(s){var u=s.toString();return u.indexOf(".")>-1?u.length-u.indexOf(".")-1:0}var Is=function(s){Dt(u,s);function u(r,f,c){rt(this,u);var h=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f)),m=c||{};return h.__min=m.min,h.__max=m.max,h.__step=m.step,A.isUndefined(h.__step)?h.initialValue===0?h.__impliedStep=1:h.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(h.initialValue))/Math.LN10))/10:h.__impliedStep=h.__step,h.__precision=ps(h.__impliedStep),h}return it(u,[{key:"setValue",value:function(f){var c=f;return this.__min!==void 0&&c<this.__min?c=this.__min:this.__max!==void 0&&c>this.__max&&(c=this.__max),this.__step!==void 0&&c%this.__step!==0&&(c=Math.round(c/this.__step)*this.__step),Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"setValue",this).call(this,c)}},{key:"min",value:function(f){return this.__min=f,this}},{key:"max",value:function(f){return this.__max=f,this}},{key:"step",value:function(f){return this.__step=f,this.__impliedStep=f,this.__precision=ps(f),this}}]),u}(Jt);function mv(s,u){var r=Math.pow(10,u);return Math.round(s*r)/r}var Kr=function(s){Dt(u,s);function u(r,f,c){rt(this,u);var h=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f,c));h.__truncationSuspended=!1;var m=h,S=void 0;function O(){var X=parseFloat(m.__input.value);A.isNaN(X)||m.setValue(X)}function D(){m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}function U(){D()}function T(X){var P=S-X.clientY;m.setValue(m.getValue()+P*m.__impliedStep),S=X.clientY}function H(){v.unbind(window,"mousemove",T),v.unbind(window,"mouseup",H),D()}function $(X){v.bind(window,"mousemove",T),v.bind(window,"mouseup",H),S=X.clientY}return h.__input=document.createElement("input"),h.__input.setAttribute("type","text"),v.bind(h.__input,"change",O),v.bind(h.__input,"blur",U),v.bind(h.__input,"mousedown",$),v.bind(h.__input,"keydown",function(X){X.keyCode===13&&(m.__truncationSuspended=!0,this.blur(),m.__truncationSuspended=!1,D())}),h.updateDisplay(),h.domElement.appendChild(h.__input),h}return it(u,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():mv(this.getValue(),this.__precision),Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"updateDisplay",this).call(this)}}]),u}(Is);function gs(s,u,r,f,c){return f+(c-f)*((s-u)/(r-u))}var Eu=function(s){Dt(u,s);function u(r,f,c,h,m){rt(this,u);var S=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f,{min:c,max:h,step:m})),O=S;S.__background=document.createElement("div"),S.__foreground=document.createElement("div"),v.bind(S.__background,"mousedown",D),v.bind(S.__background,"touchstart",H),v.addClass(S.__background,"slider"),v.addClass(S.__foreground,"slider-fg");function D(P){document.activeElement.blur(),v.bind(window,"mousemove",U),v.bind(window,"mouseup",T),U(P)}function U(P){P.preventDefault();var q=O.__background.getBoundingClientRect();return O.setValue(gs(P.clientX,q.left,q.right,O.__min,O.__max)),!1}function T(){v.unbind(window,"mousemove",U),v.unbind(window,"mouseup",T),O.__onFinishChange&&O.__onFinishChange.call(O,O.getValue())}function H(P){P.touches.length===1&&(v.bind(window,"touchmove",$),v.bind(window,"touchend",X),$(P))}function $(P){var q=P.touches[0].clientX,ye=O.__background.getBoundingClientRect();O.setValue(gs(q,ye.left,ye.right,O.__min,O.__max))}function X(){v.unbind(window,"touchmove",$),v.unbind(window,"touchend",X),O.__onFinishChange&&O.__onFinishChange.call(O,O.getValue())}return S.updateDisplay(),S.__background.appendChild(S.__foreground),S.domElement.appendChild(S.__background),S}return it(u,[{key:"updateDisplay",value:function(){var f=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=f*100+"%",Pt(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"updateDisplay",this).call(this)}}]),u}(Is),Bs=function(s){Dt(u,s);function u(r,f,c){rt(this,u);var h=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f)),m=h;return h.__button=document.createElement("div"),h.__button.innerHTML=c===void 0?"Fire":c,v.bind(h.__button,"click",function(S){return S.preventDefault(),m.fire(),!1}),v.addClass(h.__button,"button"),h.domElement.appendChild(h.__button),h}return it(u,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),u}(Jt),Su=function(s){Dt(u,s);function u(r,f){rt(this,u);var c=Nt(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,r,f));c.__color=new we(c.getValue()),c.__temp=new we(0);var h=c;c.domElement=document.createElement("div"),v.makeSelectable(c.domElement,!1),c.__selector=document.createElement("div"),c.__selector.className="selector",c.__saturation_field=document.createElement("div"),c.__saturation_field.className="saturation-field",c.__field_knob=document.createElement("div"),c.__field_knob.className="field-knob",c.__field_knob_border="2px solid ",c.__hue_knob=document.createElement("div"),c.__hue_knob.className="hue-knob",c.__hue_field=document.createElement("div"),c.__hue_field.className="hue-field",c.__input=document.createElement("input"),c.__input.type="text",c.__input_textShadow="0 1px 1px ",v.bind(c.__input,"keydown",function(P){P.keyCode===13&&T.call(this)}),v.bind(c.__input,"blur",T),v.bind(c.__selector,"mousedown",function(){v.addClass(this,"drag").bind(window,"mouseup",function(){v.removeClass(h.__selector,"drag")})}),v.bind(c.__selector,"touchstart",function(){v.addClass(this,"drag").bind(window,"touchend",function(){v.removeClass(h.__selector,"drag")})});var m=document.createElement("div");A.extend(c.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),A.extend(c.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:c.__field_knob_border+(c.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),A.extend(c.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),A.extend(c.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),A.extend(m.style,{width:"100%",height:"100%",background:"none"}),vs(m,"top","rgba(0,0,0,0)","#000"),A.extend(c.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),wv(c.__hue_field),A.extend(c.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:c.__input_textShadow+"rgba(0,0,0,0.7)"}),v.bind(c.__saturation_field,"mousedown",S),v.bind(c.__saturation_field,"touchstart",S),v.bind(c.__field_knob,"mousedown",S),v.bind(c.__field_knob,"touchstart",S),v.bind(c.__hue_field,"mousedown",O),v.bind(c.__hue_field,"touchstart",O);function S(P){$(P),v.bind(window,"mousemove",$),v.bind(window,"touchmove",$),v.bind(window,"mouseup",D),v.bind(window,"touchend",D)}function O(P){X(P),v.bind(window,"mousemove",X),v.bind(window,"touchmove",X),v.bind(window,"mouseup",U),v.bind(window,"touchend",U)}function D(){v.unbind(window,"mousemove",$),v.unbind(window,"touchmove",$),v.unbind(window,"mouseup",D),v.unbind(window,"touchend",D),H()}function U(){v.unbind(window,"mousemove",X),v.unbind(window,"touchmove",X),v.unbind(window,"mouseup",U),v.unbind(window,"touchend",U),H()}function T(){var P=Au(this.value);P!==!1?(h.__color.__state=P,h.setValue(h.__color.toOriginal())):this.value=h.__color.toString()}function H(){h.__onFinishChange&&h.__onFinishChange.call(h,h.__color.toOriginal())}c.__saturation_field.appendChild(m),c.__selector.appendChild(c.__field_knob),c.__selector.appendChild(c.__saturation_field),c.__selector.appendChild(c.__hue_field),c.__hue_field.appendChild(c.__hue_knob),c.domElement.appendChild(c.__input),c.domElement.appendChild(c.__selector),c.updateDisplay();function $(P){P.type.indexOf("touch")===-1&&P.preventDefault();var q=h.__saturation_field.getBoundingClientRect(),ye=P.touches&&P.touches[0]||P,Pe=ye.clientX,Q=ye.clientY,ie=(Pe-q.left)/(q.right-q.left),me=1-(Q-q.top)/(q.bottom-q.top);return me>1?me=1:me<0&&(me=0),ie>1?ie=1:ie<0&&(ie=0),h.__color.v=me,h.__color.s=ie,h.setValue(h.__color.toOriginal()),!1}function X(P){P.type.indexOf("touch")===-1&&P.preventDefault();var q=h.__hue_field.getBoundingClientRect(),ye=P.touches&&P.touches[0]||P,Pe=ye.clientY,Q=1-(Pe-q.top)/(q.bottom-q.top);return Q>1?Q=1:Q<0&&(Q=0),h.__color.h=Q*360,h.setValue(h.__color.toOriginal()),!1}return c}return it(u,[{key:"updateDisplay",value:function(){var f=Au(this.getValue());if(f!==!1){var c=!1;A.each(we.COMPONENTS,function(S){if(!A.isUndefined(f[S])&&!A.isUndefined(this.__color.__state[S])&&f[S]!==this.__color.__state[S])return c=!0,{}},this),c&&A.extend(this.__color.__state,f)}A.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var h=this.__color.v<.5||this.__color.s>.5?255:0,m=255-h;A.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+h+","+h+","+h+")"}),this.__hue_knob.style.marginTop=(1-this.__color.h/360)*100+"px",this.__temp.s=1,this.__temp.v=1,vs(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),A.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+h+","+h+","+h+")",textShadow:this.__input_textShadow+"rgba("+m+","+m+","+m+",.7)"})}}]),u}(Jt),bv=["-moz-","-o-","-webkit-","-ms-",""];function vs(s,u,r,f){s.style.background="",A.each(bv,function(c){s.style.cssText+="background: "+c+"linear-gradient("+u+", "+r+" 0%, "+f+" 100%); "})}function wv(s){s.style.background="",s.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",s.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var yv={load:function(u,r){var f=r||document,c=f.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=u,f.getElementsByTagName("head")[0].appendChild(c)},inject:function(u,r){var f=r||document,c=document.createElement("style");c.type="text/css",c.innerHTML=u;var h=f.getElementsByTagName("head")[0];try{h.appendChild(c)}catch{}}},xv=`<div id="dg-save" class="dg dialogue">

  Here's the new load parameter for your <code>GUI</code>'s constructor:

  <textarea id="dg-new-constructor"></textarea>

  <div id="dg-save-locally">

    <input id="dg-local-storage" type="checkbox"/> Automatically save
    values to <code>localStorage</code> on exit.

    <div id="dg-local-explain">The values saved to <code>localStorage</code> will
      override those passed to <code>dat.GUI</code>'s constructor. This makes it
      easier to work incrementally, but <code>localStorage</code> is fragile,
      and your friends may not see the same values you do.

    </div>

  </div>

</div>`,Av=function(u,r){var f=u[r];return A.isArray(arguments[2])||A.isObject(arguments[2])?new gv(u,r,arguments[2]):A.isNumber(f)?A.isNumber(arguments[2])&&A.isNumber(arguments[3])?A.isNumber(arguments[4])?new Eu(u,r,arguments[2],arguments[3],arguments[4]):new Eu(u,r,arguments[2],arguments[3]):A.isNumber(arguments[4])?new Kr(u,r,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Kr(u,r,{min:arguments[2],max:arguments[3]}):A.isString(f)?new vv(u,r):A.isFunction(f)?new Bs(u,r,""):A.isBoolean(f)?new Ls(u,r):null};function Ev(s){setTimeout(s,1e3/60)}var Sv=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||Ev,Cv=function(){function s(){rt(this,s),this.backgroundElement=document.createElement("div"),A.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),v.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),A.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var u=this;v.bind(this.backgroundElement,"click",function(){u.hide()})}return it(s,[{key:"show",value:function(){var r=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),A.defer(function(){r.backgroundElement.style.opacity=1,r.domElement.style.opacity=1,r.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var r=this,f=function c(){r.domElement.style.display="none",r.backgroundElement.style.display="none",v.unbind(r.domElement,"webkitTransitionEnd",c),v.unbind(r.domElement,"transitionend",c),v.unbind(r.domElement,"oTransitionEnd",c)};v.bind(this.domElement,"webkitTransitionEnd",f),v.bind(this.domElement,"transitionend",f),v.bind(this.domElement,"oTransitionEnd",f),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-v.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-v.getHeight(this.domElement)/2+"px"}}]),s}(),Ov=cv(`.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}
`);yv.inject(Ov);var ms="dg",bs=72,ws=20,Xn="Default",Vn=function(){try{return!!window.localStorage}catch{return!1}}(),zn=void 0,ys=!0,_n=void 0,wu=!1,Fs=[],re=function s(u){var r=this,f=u||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),v.addClass(this.domElement,ms),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],f=A.defaults(f,{closeOnTop:!1,autoPlace:!0,width:s.DEFAULT_WIDTH}),f=A.defaults(f,{resizable:f.autoPlace,hideable:f.autoPlace}),A.isUndefined(f.load)?f.load={preset:Xn}:f.preset&&(f.load.preset=f.preset),A.isUndefined(f.parent)&&f.hideable&&Fs.push(this),f.resizable=A.isUndefined(f.parent)&&f.resizable,f.autoPlace&&A.isUndefined(f.scrollable)&&(f.scrollable=!0);var c=Vn&&localStorage.getItem(pn(this,"isLocal"))==="true",h=void 0,m=void 0;if(Object.defineProperties(this,{parent:{get:function(){return f.parent}},scrollable:{get:function(){return f.scrollable}},autoPlace:{get:function(){return f.autoPlace}},closeOnTop:{get:function(){return f.closeOnTop}},preset:{get:function(){return r.parent?r.getRoot().preset:f.load.preset},set:function(H){r.parent?r.getRoot().preset=H:f.load.preset=H,Iv(this),r.revert()}},width:{get:function(){return f.width},set:function(H){f.width=H,Tu(r,H)}},name:{get:function(){return f.name},set:function(H){f.name=H,m&&(m.innerHTML=f.name)}},closed:{get:function(){return f.closed},set:function(H){f.closed=H,f.closed?v.addClass(r.__ul,s.CLASS_CLOSED):v.removeClass(r.__ul,s.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=H?s.TEXT_OPEN:s.TEXT_CLOSED)}},load:{get:function(){return f.load}},useLocalStorage:{get:function(){return c},set:function(H){Vn&&(c=H,H?v.bind(window,"unload",h):v.unbind(window,"unload",h),localStorage.setItem(pn(r,"isLocal"),H))}}}),A.isUndefined(f.parent)){if(this.closed=f.closed||!1,v.addClass(this.domElement,s.CLASS_MAIN),v.makeSelectable(this.domElement,!1),Vn&&c){r.useLocalStorage=!0;var S=localStorage.getItem(pn(this,"gui"));S&&(f.load=JSON.parse(S))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=s.TEXT_CLOSED,v.addClass(this.__closeButton,s.CLASS_CLOSE_BUTTON),f.closeOnTop?(v.addClass(this.__closeButton,s.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(v.addClass(this.__closeButton,s.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),v.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{f.closed===void 0&&(f.closed=!0);var O=document.createTextNode(f.name);v.addClass(O,"controller-name"),m=Bu(r,O);var D=function(H){return H.preventDefault(),r.closed=!r.closed,!1};v.addClass(this.__ul,s.CLASS_CLOSED),v.addClass(m,"title"),v.bind(m,"click",D),f.closed||(this.closed=!1)}f.autoPlace&&(A.isUndefined(f.parent)&&(ys&&(_n=document.createElement("div"),v.addClass(_n,ms),v.addClass(_n,s.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(_n),ys=!1),_n.appendChild(this.domElement),v.addClass(this.domElement,s.CLASS_AUTO_PLACE)),this.parent||Tu(r,f.width)),this.__resizeHandler=function(){r.onResizeDebounced()},v.bind(window,"resize",this.__resizeHandler),v.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),v.bind(this.__ul,"transitionend",this.__resizeHandler),v.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),f.resizable&&Lv(this),h=function(){Vn&&localStorage.getItem(pn(r,"isLocal"))==="true"&&localStorage.setItem(pn(r,"gui"),JSON.stringify(r.getSaveObject()))},this.saveToLocalStorageIfPossible=h;function U(){var T=r.getRoot();T.width+=1,A.defer(function(){T.width-=1})}f.parent||U()};re.toggleHide=function(){wu=!wu,A.each(Fs,function(s){s.domElement.style.display=wu?"none":""})};re.CLASS_AUTO_PLACE="a";re.CLASS_AUTO_PLACE_CONTAINER="ac";re.CLASS_MAIN="main";re.CLASS_CONTROLLER_ROW="cr";re.CLASS_TOO_TALL="taller-than-window";re.CLASS_CLOSED="closed";re.CLASS_CLOSE_BUTTON="close-button";re.CLASS_CLOSE_TOP="close-top";re.CLASS_CLOSE_BOTTOM="close-bottom";re.CLASS_DRAG="drag";re.DEFAULT_WIDTH=245;re.TEXT_CLOSED="Close Controls";re.TEXT_OPEN="Open Controls";re._keydownHandler=function(s){document.activeElement.type!=="text"&&(s.which===bs||s.keyCode===bs)&&re.toggleHide()};v.bind(window,"keydown",re._keydownHandler,!1);A.extend(re.prototype,{add:function(u,r){return Kn(this,u,r,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(u,r){return Kn(this,u,r,{color:!0})},remove:function(u){this.__ul.removeChild(u.__li),this.__controllers.splice(this.__controllers.indexOf(u),1);var r=this;A.defer(function(){r.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&_n.removeChild(this.domElement);var u=this;A.each(this.__folders,function(r){u.removeFolder(r)}),v.unbind(window,"keydown",re._keydownHandler,!1),xs(this)},addFolder:function(u){if(this.__folders[u]!==void 0)throw new Error('You already have a folder in this GUI by the name "'+u+'"');var r={name:u,parent:this};r.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[u]&&(r.closed=this.load.folders[u].closed,r.load=this.load.folders[u]);var f=new re(r);this.__folders[u]=f;var c=Bu(this,f.domElement);return v.addClass(c,"folder"),f},removeFolder:function(u){this.__ul.removeChild(u.domElement.parentElement),delete this.__folders[u.name],this.load&&this.load.folders&&this.load.folders[u.name]&&delete this.load.folders[u.name],xs(u);var r=this;A.each(u.__folders,function(f){u.removeFolder(f)}),A.defer(function(){r.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var u=this.getRoot();if(u.scrollable){var r=v.getOffset(u.__ul).top,f=0;A.each(u.__ul.childNodes,function(c){u.autoPlace&&c===u.__save_row||(f+=v.getHeight(c))}),window.innerHeight-r-ws<f?(v.addClass(u.domElement,re.CLASS_TOO_TALL),u.__ul.style.height=window.innerHeight-r-ws+"px"):(v.removeClass(u.domElement,re.CLASS_TOO_TALL),u.__ul.style.height="auto")}u.__resize_handle&&A.defer(function(){u.__resize_handle.style.height=u.__ul.offsetHeight+"px"}),u.__closeButton&&(u.__closeButton.style.width=u.width+"px")},onResizeDebounced:A.debounce(function(){this.onResize()},50),remember:function(){if(A.isUndefined(zn)&&(zn=new Cv,zn.domElement.innerHTML=xv),this.parent)throw new Error("You can only call remember on a top level GUI.");var u=this;A.each(Array.prototype.slice.call(arguments),function(r){u.__rememberedObjects.length===0&&Rv(u),u.__rememberedObjects.indexOf(r)===-1&&u.__rememberedObjects.push(r)}),this.autoPlace&&Tu(this,this.width)},getRoot:function(){for(var u=this;u.parent;)u=u.parent;return u},getSaveObject:function(){var u=this.load;return u.closed=this.closed,this.__rememberedObjects.length>0&&(u.preset=this.preset,u.remembered||(u.remembered={}),u.remembered[this.preset]=$r(this)),u.folders={},A.each(this.__folders,function(r,f){u.folders[f]=r.getSaveObject()}),u},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=$r(this),Cu(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(u){this.load.remembered||(this.load.remembered={},this.load.remembered[Xn]=$r(this,!0)),this.load.remembered[u]=$r(this),this.preset=u,Ou(this,u,!0),this.saveToLocalStorageIfPossible()},revert:function(u){A.each(this.__controllers,function(r){this.getRoot().load.remembered?Ps(u||this.getRoot(),r):r.setValue(r.initialValue),r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())},this),A.each(this.__folders,function(r){r.revert(r)}),u||Cu(this.getRoot(),!1)},listen:function(u){var r=this.__listening.length===0;this.__listening.push(u),r&&Ds(this.__listening)},updateDisplay:function(){A.each(this.__controllers,function(u){u.updateDisplay()}),A.each(this.__folders,function(u){u.updateDisplay()})}});function Bu(s,u,r){var f=document.createElement("li");return u&&f.appendChild(u),r?s.__ul.insertBefore(f,r):s.__ul.appendChild(f),s.onResize(),f}function xs(s){v.unbind(window,"resize",s.__resizeHandler),s.saveToLocalStorageIfPossible&&v.unbind(window,"unload",s.saveToLocalStorageIfPossible)}function Cu(s,u){var r=s.__preset_select[s.__preset_select.selectedIndex];u?r.innerHTML=r.value+"*":r.innerHTML=r.value}function Tv(s,u,r){if(r.__li=u,r.__gui=s,A.extend(r,{options:function(m){if(arguments.length>1){var S=r.__li.nextElementSibling;return r.remove(),Kn(s,r.object,r.property,{before:S,factoryArgs:[A.toArray(arguments)]})}if(A.isArray(m)||A.isObject(m)){var O=r.__li.nextElementSibling;return r.remove(),Kn(s,r.object,r.property,{before:O,factoryArgs:[m]})}},name:function(m){return r.__li.firstElementChild.firstElementChild.innerHTML=m,r},listen:function(){return r.__gui.listen(r),r},remove:function(){return r.__gui.remove(r),r}}),r instanceof Eu){var f=new Kr(r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});A.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(h){var m=r[h],S=f[h];r[h]=f[h]=function(){var O=Array.prototype.slice.call(arguments);return S.apply(f,O),m.apply(r,O)}}),v.addClass(u,"has-slider"),r.domElement.insertBefore(f.domElement,r.domElement.firstElementChild)}else if(r instanceof Kr){var c=function(m){if(A.isNumber(r.__min)&&A.isNumber(r.__max)){var S=r.__li.firstElementChild.firstElementChild.innerHTML,O=r.__gui.__listening.indexOf(r)>-1;r.remove();var D=Kn(s,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]});return D.name(S),O&&D.listen(),D}return m};r.min=A.compose(c,r.min),r.max=A.compose(c,r.max)}else r instanceof Ls?(v.bind(u,"click",function(){v.fakeEvent(r.__checkbox,"click")}),v.bind(r.__checkbox,"click",function(h){h.stopPropagation()})):r instanceof Bs?(v.bind(u,"click",function(){v.fakeEvent(r.__button,"click")}),v.bind(u,"mouseover",function(){v.addClass(r.__button,"hover")}),v.bind(u,"mouseout",function(){v.removeClass(r.__button,"hover")})):r instanceof Su&&(v.addClass(u,"color"),r.updateDisplay=A.compose(function(h){return u.style.borderLeftColor=r.__color.toString(),h},r.updateDisplay),r.updateDisplay());r.setValue=A.compose(function(h){return s.getRoot().__preset_select&&r.isModified()&&Cu(s.getRoot(),!0),h},r.setValue)}function Ps(s,u){var r=s.getRoot(),f=r.__rememberedObjects.indexOf(u.object);if(f!==-1){var c=r.__rememberedObjectIndecesToControllers[f];if(c===void 0&&(c={},r.__rememberedObjectIndecesToControllers[f]=c),c[u.property]=u,r.load&&r.load.remembered){var h=r.load.remembered,m=void 0;if(h[s.preset])m=h[s.preset];else if(h[Xn])m=h[Xn];else return;if(m[f]&&m[f][u.property]!==void 0){var S=m[f][u.property];u.initialValue=S,u.setValue(S)}}}}function Kn(s,u,r,f){if(u[r]===void 0)throw new Error('Object "'+u+'" has no property "'+r+'"');var c=void 0;if(f.color)c=new Su(u,r);else{var h=[u,r].concat(f.factoryArgs);c=Av.apply(s,h)}f.before instanceof Jt&&(f.before=f.before.__li),Ps(s,c),v.addClass(c.domElement,"c");var m=document.createElement("span");v.addClass(m,"property-name"),m.innerHTML=c.property;var S=document.createElement("div");S.appendChild(m),S.appendChild(c.domElement);var O=Bu(s,S,f.before);return v.addClass(O,re.CLASS_CONTROLLER_ROW),c instanceof Su?v.addClass(O,"color"):v.addClass(O,hv(c.getValue())),Tv(s,O,c),s.__controllers.push(c),c}function pn(s,u){return document.location.href+"."+u}function Ou(s,u,r){var f=document.createElement("option");f.innerHTML=u,f.value=u,s.__preset_select.appendChild(f),r&&(s.__preset_select.selectedIndex=s.__preset_select.length-1)}function As(s,u){u.style.display=s.useLocalStorage?"block":"none"}function Rv(s){var u=s.__save_row=document.createElement("li");v.addClass(s.domElement,"has-save"),s.__ul.insertBefore(u,s.__ul.firstChild),v.addClass(u,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",v.addClass(r,"button gears");var f=document.createElement("span");f.innerHTML="Save",v.addClass(f,"button"),v.addClass(f,"save");var c=document.createElement("span");c.innerHTML="New",v.addClass(c,"button"),v.addClass(c,"save-as");var h=document.createElement("span");h.innerHTML="Revert",v.addClass(h,"button"),v.addClass(h,"revert");var m=s.__preset_select=document.createElement("select");if(s.load&&s.load.remembered?A.each(s.load.remembered,function(T,H){Ou(s,H,H===s.preset)}):Ou(s,Xn,!1),v.bind(m,"change",function(){for(var T=0;T<s.__preset_select.length;T++)s.__preset_select[T].innerHTML=s.__preset_select[T].value;s.preset=this.value}),u.appendChild(m),u.appendChild(r),u.appendChild(f),u.appendChild(c),u.appendChild(h),Vn){var S=document.getElementById("dg-local-explain"),O=document.getElementById("dg-local-storage"),D=document.getElementById("dg-save-locally");D.style.display="block",localStorage.getItem(pn(s,"isLocal"))==="true"&&O.setAttribute("checked","checked"),As(s,S),v.bind(O,"change",function(){s.useLocalStorage=!s.useLocalStorage,As(s,S)})}var U=document.getElementById("dg-new-constructor");v.bind(U,"keydown",function(T){T.metaKey&&(T.which===67||T.keyCode===67)&&zn.hide()}),v.bind(r,"click",function(){U.innerHTML=JSON.stringify(s.getSaveObject(),void 0,2),zn.show(),U.focus(),U.select()}),v.bind(f,"click",function(){s.save()}),v.bind(c,"click",function(){var T=prompt("Enter a new preset name.");T&&s.saveAs(T)}),v.bind(h,"click",function(){s.revert()})}function Lv(s){var u=void 0;s.__resize_handle=document.createElement("div"),A.extend(s.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});function r(h){return h.preventDefault(),s.width+=u-h.clientX,s.onResize(),u=h.clientX,!1}function f(){v.removeClass(s.__closeButton,re.CLASS_DRAG),v.unbind(window,"mousemove",r),v.unbind(window,"mouseup",f)}function c(h){return h.preventDefault(),u=h.clientX,v.addClass(s.__closeButton,re.CLASS_DRAG),v.bind(window,"mousemove",r),v.bind(window,"mouseup",f),!1}v.bind(s.__resize_handle,"mousedown",c),v.bind(s.__closeButton,"mousedown",c),s.domElement.insertBefore(s.__resize_handle,s.domElement.firstElementChild)}function Tu(s,u){s.domElement.style.width=u+"px",s.__save_row&&s.autoPlace&&(s.__save_row.style.width=u+"px"),s.__closeButton&&(s.__closeButton.style.width=u+"px")}function $r(s,u){var r={};return A.each(s.__rememberedObjects,function(f,c){var h={},m=s.__rememberedObjectIndecesToControllers[c];A.each(m,function(S,O){h[O]=u?S.initialValue:S.getValue()}),r[c]=h}),r}function Iv(s){for(var u=0;u<s.__preset_select.length;u++)s.__preset_select[u].value===s.preset&&(s.__preset_select.selectedIndex=u)}function Ds(s){s.length!==0&&Sv.call(window,function(){Ds(s)}),A.each(s,function(u){u.updateDisplay()})}var Bv=re;const Fv=Yr(),{abhStage:Es}=qr(Fv),Pv=s=>{let u={scaleLock:!1,axesView:!1,highLight:!1};const r=new Dg(5),f=new Bv;f.domElement.style.position="absolute",f.domElement.style.right="16%",f.domElement.style.top="50px",f.add(s,"name").name("节点名称"),f.add(u,"highLight").name("高亮").onChange(S=>{S?Es.value.outlineObj([s]):Es.value.cancelOutline()});let c=f.addFolder("位置");c.add(u,"axesView").onChange(S=>{S?s.add(r):s.remove(r)}),c.add(s.position,"x",-10,10),c.add(s.position,"y",-10,10),c.add(s.position,"z",-10,10);let h=f.addFolder("比例尺");h.add(s.scale,"x",0,5),h.add(s.scale,"y",0,5),h.add(s.scale,"z",0,5);let m=f.addFolder("旋转");return m.add(s.rotation,"x",-Math.PI*2,Math.PI*2),m.add(s.rotation,"y",-Math.PI*2,Math.PI*2),m.add(s.rotation,"z",-Math.PI*2,Math.PI*2),f},Dv=s=>(Jr("data-v-01b70f5f"),s=s(),Zr(),s),Nv={class:"right-bar-model"},Mv=Dv(()=>pe("div",null,"选择模型",-1)),kv={class:"right-bar-model-button-list"},Uv=["onClick"],Hv=["src"],Wv=Xr({__name:"rightBarModel",setup(s){const u=Yr(),{abhStage:r,sceneNeedSave:f,hiddenBar:c}=qr(u),h=qe(!1),m=qe([]);m.value=[];const S=()=>{h.value=!0},O=j=>{let fe=r.value.scene.getObjectByName(ie.value);r.value.loadObjectModel(fe,j.id),h.value=!1,f.value=!0},D=qe();let U=0,T="";const H=async(j,fe)=>{let Mt=document.getElementsByClassName("upload-model");if(Mt&&Mt.length>0){let se=Mt[0].getElementsByTagName("input");se&&se.length>0&&se[0].files&&se[0].files.length>0&&(U=se[0].files.length,T=se[0].files[0].webkitRelativePath.split("/")[0])}if(U==fe.length)try{const se=$n.find(fe,Yn=>Yn.name.split(".")[1]=="gltf");let kt=Yg.md5.hmac([qg().valueOf()],se.name);await r.value.importObjectModel(fe,se.name,kt,T);let vn={id:kt,name:T,path:se.name,image_path:"/model/default.jpg"};m.value.push(vn),localStorage.setItem("modelList",JSON.stringify(m.value)),Ee({message:"upload model success",type:"success",plain:!0}),D.value.clearFiles(),T=""}catch(se){console.log(se),Ee({message:"upload model fail",type:"error",plain:!0})}},$=async j=>{try{let fe=m.value[j].id;await Jg.removeItem(fe),m.value.splice(j,1),localStorage.setItem("modelList",JSON.stringify(m.value)),Ee({message:"delete model success",type:"success",plain:!0})}catch{Ee({message:"delete model fail",type:"error",plain:!0})}},X=()=>{try{if(ie.value!==""&&ie.value!=="scene"){console.log(ie.value);let j=r.value.scene.getObjectByName(ie.value);j.parent.remove(j),Ee({message:"model delete from scene Success",type:"success",plain:!0})}}catch{Ee({message:"model delete from scene error",type:"error",plain:!0})}},P=qe(),q={children:"children",label:"name"},ye=Ng(()=>[{name:r.value.scene.name,children:r.value.getModelTree(r.value.scene)}]);Mg(()=>c.value,()=>{c.value?Q.value.domElement.style.right="16%":Q.value.domElement.style.right="2%"});const Pe=qe({}),Q=qe(null),ie=qe(""),me=j=>{if(ie.value!==j.name){ie.value=j.name;let fe=r.value.scene.getObjectByName(j.name);Q.value&&(Q.value.hide(),Q.value=null),j.name in Pe.value?(Q.value=Pe.value[j.name],Q.value.show()):(Q.value=Pv(fe),Pe.value[j.name]=Q.value),f.value=!0}},wt=()=>{ie.value=r.value.scene.name},Je=()=>{let j=localStorage.getItem("modelList");m.value=j?JSON.parse(j):[],wt()};return Ss(()=>{Je(),document.getElementsByName("el-upload_mapinput")[0].webkitdirectory=!0}),kg(()=>{Pe.value&&Object.keys(Pe.value).forEach(j=>{Pe.value[j].destroy()})}),(j,fe)=>{const Mt=xu("el-tree");return It(),qt("div",Nv,[pe("div",null,[pe("div",null,[Mv,ne(Mt,{modelValue:ie.value,"onUpdate:modelValue":fe[0]||(fe[0]=se=>ie.value=se),ref_key:"modelTreeEl",ref:P,"node-key":"name","expand-on-click-node":!1,data:ye.value,"highlight-current":"",props:q,onNodeClick:me},null,8,["modelValue","data"])]),pe("div",kv,[ne(he(Ft),{class:"right-bar-model-button",onClick:S},{default:_e(()=>[Bt("模型列表")]),_:1}),ne(he(Ug),{class:"upload-model",ref_key:"uploadModelRef",ref:D,name:"el-upload_mapinput","show-file-list":!1,"auto-upload":!1,multiple:"","on-change":H},{trigger:_e(()=>[ne(he(Ft),{class:"right-bar-model-button"},{default:_e(()=>[Bt("模型导入")]),_:1})]),_:1},512),Hg(ne(he(Ft),{class:"right-bar-model-button",onClick:X},{default:_e(()=>[Bt("模型删除")]),_:1},512),[[Wg,ie.value!==""&&ie.value!=="scene"]])])]),ne(he(Xg),{modelValue:h.value,"onUpdate:modelValue":fe[2]||(fe[2]=se=>h.value=se),title:"模型列表",direction:"btt",class:"model-drawer"},{default:_e(()=>[(It(!0),qt(Cs,null,Os(m.value,(se,kt)=>(It(),qt("div",{key:kt,class:"model-image",onClick:vn=>O(se)},[pe("label",null,Gg(se.name),1),pe("img",{src:se.image_path},null,8,Hv),ne(he($g),{title:"确定删除?",onConfirm:vn=>$(kt)},{reference:_e(()=>[pe("div",{class:"model-delete",onClick:fe[1]||(fe[1]=Vg(()=>{},["stop"]))},[ne(he(zg),null,{default:_e(()=>[ne(he(Kg))]),_:1})])]),_:2},1032,["onConfirm"])],8,Uv))),128))]),_:1},8,["modelValue"])])}}}),Gv=Qr(Wv,[["__scopeId","data-v-01b70f5f"]]),Fu=s=>(Jr("data-v-6838f119"),s=s(),Zr(),s),$v={class:"right-bar"},Vv=Fu(()=>pe("div",{class:"right-bar-title"}," 控制 ",-1)),zv=Fu(()=>pe("div",{class:"right-bar-title"}," 场景 ",-1)),Kv=Fu(()=>pe("div",{class:"right-bar-title"}," 模型 ",-1)),Xv=Xr({__name:"rightBar",setup(s){return(u,r)=>{const f=xu("el-collapse-item"),c=xu("el-collapse");return It(),qt("div",$v,[ne(c,null,{default:_e(()=>[ne(f,{name:"1"},{title:_e(()=>[Vv]),default:_e(()=>[ne(iv)]),_:1}),ne(f,{name:"2"},{title:_e(()=>[zv]),default:_e(()=>[ne(fv)]),_:1}),ne(f,{name:"3"},{title:_e(()=>[Kv]),default:_e(()=>[ne(Gv)]),_:1})]),_:1})])}}}),qv=Qr(Xv,[["__scopeId","data-v-6838f119"]]);export{qv as default};
